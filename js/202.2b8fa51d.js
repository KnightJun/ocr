"use strict";(self["webpackChunkpearocr"]=self["webpackChunkpearocr"]||[]).push([[202],{2353:(e,t,o)=>{o.d(t,{Z:()=>r});o(71);var i=o(4688),l={_data:{},_changeCallBack:{}},n={version:2,errWordHandle:"Normal",highlightErrWordThres:.6,recThres:.6,unclipRadio:1.6,limitSideLen:960,splitThres:1,splitOverlap:64,keepLowScore:!1,textBackground:"#faebd7",textColor:"#000000",textBgTransparent:!1,recLangCode:"zh-CHS",sortingType:"byFileName",uiLangCode:"zh-CHS"};function a(e,t,o){"object"==typeof e?e[t]=o:"function"==typeof e&&e(o)}l.reset=()=>{l.setFromDict(n,!0),l.save()},l.save=()=>{let e={};for(const o in l._data)void 0!=n[o]&&(e[o]=l._data[o]);let t=JSON.stringify(e);localStorage.setItem("PearOcrConfig",t)},l.load=()=>{let e=localStorage.getItem("PearOcrConfig");if(e){if(l._data=JSON.parse(e),!l._data["version"]||l._data["version"]!=n.version)return console.log("unmatch version, cur:",n.version," store version:",l._data["version"]),void l.reset();for(const e in n)void 0==l._data[e]&&l.set(e,n[e])}else l.reset()},l.get=e=>l._data[e],l.set=(e,t)=>{let o=t;while("object"===typeof o&&"value"in o)o=o.value;if(l._changeCallBack[e]&&l._data[e]!=o)for(const i of l._changeCallBack[e])a(i,e,o);l._data[e]=o},l.setFromDict=(e,t=!1)=>{for(const o in e)(t||o in l._data)&&l.set(o,e[o])},l.getToDict=(e,t=!1)=>{for(const o in e){let i=l.get(o);if(void 0!=i){if(!t&&!(o in e))continue;"object"===typeof e[o]&&"value"in e[o]?e[o].value=i:e[o]=i}}},l.addMonitor=(e,t)=>{if("object"!=typeof e)void 0==l._changeCallBack[e]&&(l._changeCallBack[e]=[]),l._changeCallBack[e].push(t),l._data[e]&&a(t,e,l._data[e]);else for(const o of e)l.addMonitor(o,t)},l.load(),i.ZP.is.mobile?l._data.limitSideLen=640:l._data.limitSideLen=960;const r=l},4202:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ii});var i=o(3673);function l(e,t,o,l,n,a){const r=(0,i.up)("Index");return(0,i.wg)(),(0,i.j4)(r)}function n(e,t,o,l,n,a){const r=(0,i.up)("MainResultView"),s=(0,i.up)("ImageList"),d=(0,i.up)("UploadImage"),c=(0,i.up)("SingleTextView"),u=(0,i.up)("RecLanguageLoader"),m=(0,i.up)("q-resize-observer"),g=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(g,{class:"flex flex-center size-alignment"},{default:(0,i.w5)((()=>[(0,i.Wm)(r),(0,i.Wm)(s),(0,i.Wm)(d),(0,i.Wm)(c),(0,i.Wm)(u),(0,i.Wm)(m,{onResize:e.onResize},null,8,["onResize"])])),_:1})}var a=o(2323),r=o(8880);(0,i.dD)("data-v-36e6e9c0");const s={class:"boundDiv ImageList"},d=["onClick"],c=["src"],u={class:"Toolbar ImageListToolbar text-light-blue"},m={class:"q-space",ref:"gapLine"},g={key:1};function h(e,t,o,l,n,h){const p=(0,i.up)("q-circular-progress"),f=(0,i.up)("q-spinner-ios"),x=(0,i.up)("q-inner-loading"),w=(0,i.up)("q-icon"),v=(0,i.up)("q-virtual-scroll"),b=(0,i.up)("ToolBtn"),I=(0,i.up)("q-item-section"),T=(0,i.up)("q-item"),y=(0,i.up)("q-list"),C=(0,i.up)("q-menu"),k=(0,i.up)("ExportPdf"),S=(0,i.up)("ExportTxt"),_=(0,i.up)("Configure"),D=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",s,[(0,i.Wm)(v,{items:n.RecoDataList,"virtual-scroll-horizontal":""},{default:(0,i.w5)((({item:t,index:o})=>[((0,i.wg)(),(0,i.iD)("div",{key:o,class:(0,a.C_)(["ImageItem relative-position delete",{ImageItemUnselected:n.selectedItem!==t,ImageItemSelected:n.selectedItem===t}]),onClick:e=>h.onItemClick(t)},[(0,i._)("img",{class:"ImageItemSize",src:t.url},null,8,c),(0,i.Wm)(x,{showing:void 0==t.text},{default:(0,i.w5)((()=>[t.isScaning?((0,i.wg)(),(0,i.j4)(p,{key:0,"show-value":"",class:"text-light-blue q-ma-md",value:n.progressVal,size:"50px",color:"light-blue"},null,8,["value"])):(0,i.kq)("",!0),t.isScaning?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(f,{key:1,size:"50%",color:"primary"}))])),_:2},1032,["showing"]),t.isScaning?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(w,{key:0,onClick:(0,r.iM)((e=>h.onItemDelete(t)),["stop"]),class:(0,a.C_)([{DeleteBtnHide:!e.$q.platform.is.mobile},"DeleteBtn DeleteBtnHV"]),name:"o_delete_outline"},null,8,["onClick","class"]))],10,d))])),_:1},8,["items"])]),(0,i._)("div",u,[(0,i.Wm)(b,{label:e.$t("ImageList.addImage"),id:"addImage",IconName:"o_add_photo_alternate",onClick:h.onUploadClick},null,8,["label","onClick"]),e.$q.platform.is.mobile?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(b,{key:0,label:e.$t("ImageList.fromClipboard"),id:"fromClipboard",IconName:"content_paste",onClick:h.onPasteImage},null,8,["label","onClick"])),(0,i._)("div",m,null,512),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.ToolsItems,(t=>((0,i.wg)(),(0,i.j4)(b,{key:t.label,label:e.$t(t.label),IconName:t.icon,disable:!(!t.cond||t.cond()),onClick:t.func},null,8,["label","IconName","disable","onClick"])))),128)),n.MenuItems.length>0?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(b,{label:e.$t("ImageList.more"),IconName:"more_horiz"},null,8,["label"]),(0,i.Wm)(C,{modelValue:n.showMenu,"onUpdate:modelValue":t[0]||(t[0]=e=>n.showMenu=e)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.MenuItems,(t=>((0,i.wg)(),(0,i.j4)(y,{dense:"",style:{"min-width":"100px"},key:t.label},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(T,{clickable:"",disable:!(!t.cond||t.cond()),onClick:t.func},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{color:"primary",name:t.icon},null,8,["name"])])),_:2},1024),(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.$t(t.label)),1)])),_:2},1024)])),_:2},1032,["disable","onClick"]),[[D]])])),_:2},1024)))),128))])),_:1},8,["modelValue"])])):(0,i.kq)("",!0)]),n.ExportPdfShow?((0,i.wg)(),(0,i.j4)(k,{key:0,modelValue:n.ExportPdfShow,"onUpdate:modelValue":t[1]||(t[1]=e=>n.ExportPdfShow=e)},null,8,["modelValue"])):(0,i.kq)("",!0),n.ExportTxtShow?((0,i.wg)(),(0,i.j4)(S,{key:1,modelValue:n.ExportTxtShow,"onUpdate:modelValue":t[2]||(t[2]=e=>n.ExportTxtShow=e)},null,8,["modelValue"])):(0,i.kq)("",!0),n.ConfigureShow?((0,i.wg)(),(0,i.j4)(_,{key:2,modelValue:n.ConfigureShow,"onUpdate:modelValue":t[3]||(t[3]=e=>n.ConfigureShow=e)},null,8,["modelValue"])):(0,i.kq)("",!0)],64)}(0,i.Cn)();o(71);var p={callBackDict:{},keyValDict:{},addevent:(e,t,o=!1)=>{p.callBackDict[e]||(p.callBackDict[e]=[]),p.callBackDict[e].push(t),0==o&&void 0!=p.keyValDict[e]&&t(p.keyValDict[e])},rmevent:(e,t)=>{if(!p.callBackDict[e])return;let o=p.callBackDict[e].indexOf(t);o>=0&&p.callBackDict[e].splice(o,1)},set:(e,t)=>{if(p.keyValDict[e]=t,p.callBackDict[e])for(const o of p.callBackDict[e])o(t)},trig:e=>{p.set(e,!p.keyValDict[e])},get:e=>p.keyValDict[e]};const f=p;o(7965),o(6101),o(979),o(6105),o(2396);o.p;function x(){return new Worker(o.p+"js/AntOcrWorker.f8176b6e.worker.js")}const w=o.p+"f91b0416e9517bfd576b4654bc712562.tf",v=o.p+"592ed67e13a2ca0ca7bd0614ff158eb5.tf",b=o.p+"644bcca4eea52af1e33121a940e41599.tf",I=o.p+"c43b6f3fff445f88847343a445f01c04.tf",T=o.p+"36f987338d326a0339fbf5662ec04473.tf",y=o.p+"0120c1c55690be53d0d59a49bfa4f228.tf",C=o.p+"7ab430b2ff567e1eff986ea092bb78e0.tf",k=o.p+"b66f6a54ccc99cf6f08e71e6ab25010d.tf",S=o.p+"de3fd5408fa47bb690369bbb82b78ce8.tf",_=o.p+"7ec01f4aebd077a3a9d9d1e6cd7b8e2b.tf",D=o.p+"dfbc0cf2d00af43499155509ba1dc806.tf";let W={"zh-CHS":[w,v,b],"en-US":[w,I,T],ja:[w,y,C],ko:[w,k,S],"zh-CHT":[w,_,D]};var V={langList:["zh-CHS","zh-CHT","en-US","ja","ko"],calcProgress:function(){let e=V.totalSize[0]+V.totalSize[1]+V.totalSize[2],t=V.loadedSize[0]+V.loadedSize[1]+V.loadedSize[2];V.onprogress&&V.onprogress(t,e)},downLang:function(e){V.urls=W[e],V.xhrarr=[new XMLHttpRequest,new XMLHttpRequest,new XMLHttpRequest],V.totalSize=[2304374,4362980,13250],V.loadedSize=[0,0,0],V.buffarr=[void 0,void 0,void 0];for(let t=0;t<V.xhrarr.length;t++){let e=V.xhrarr[t];e.open("GET",V.urls[t]),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.responseType="arraybuffer",e.xhrarrID=t,e.onprogress=function(e){e.lengthComputable&&(V.totalSize[this.xhrarrID]=e.total,V.loadedSize[this.xhrarrID]=e.loaded,V.calcProgress())},e.onload=function(e){4===this.readyState&&200===this.status&&(V.buffarr[this.xhrarrID]=this.response,V.buffarr[0]&&V.buffarr[1]&&V.buffarr[2]&&(V.onfinish&&V.onfinish(V.buffarr),V.buffarr=void 0))},e.send(null)}}};const q=V;var L=o(2353),P=o(821),M=o(4325);const{t:B}=M.i18n.global;var Z={createNew:function(){var e={isBusy:!1,txtCount:0};return e.langList=q.langList,e.ocrImage=function(t){let o=document.createElement("canvas"),i=o.getContext("2d");o.width=t.width,o.height=t.height,i.fillStyle="white",i.fillRect(0,0,t.width,t.height),i.drawImage(t,0,0);var l=i.getImageData(0,0,t.width,t.height);let n=new ArrayBuffer(l.data.length);var a=new Uint8Array(n);for(let e=0;e<a.length;e++)a[e]=l.data[e];e.init().then((function(){e.worker.postMessage({cmd:"rec",width:t.width,height:t.height,buffer:n,params:e.params,unclipRadio:L.Z.get("unclipRadio"),limitSideLen:L.Z.get("limitSideLen"),splitThres:L.Z.get("splitThres"),splitOverlap:L.Z.get("splitOverlap")},[n])}))},e.ocrImageUrl=function(t,o){var i=new Image;e.isBusy?e["onError"]&&e["onError"]("antocr is busy"):(e.isBusy=!0,i.userData=o,i.onload=function(){e.onImageLoad&&e.onImageLoad(this,this.userData),e.ocrImage(this)},i.src=t)},e.onmessage=function(t){if("Init"!=t.data)if("recFinish"==t.data[0]){var o=JSON.parse(t.data[3]);o.langCode=e.langCode,e.isBusy=!1,e.worker.terminate(),e.worker=void 0,e["onRecognitionCompleted"]&&e["onRecognitionCompleted"](o)}else"progressCB"==t.data[0]?e["onProgress"]&&e["onProgress"](t.data[1],t.data[2]):"runError"==t.data[0]&&e.onRunError(t.data[1]);else e.initPromise[0]()},e.init=function(){return e.worker&&e.worker.terminate(),e.worker=new x,e.worker.onmessage=e.onmessage,e.worker.onerror=function(t){e.onRunError(t)},new Promise((function(t,o){e.initPromise=[t,o]}))},e.onRunError=function(e){P.Z.create({title:B("antOcr.runError"),persistent:!0,message:B("antOcr.runErrorMessage")}),console.log("onRunError",e)},e.setLang=function(t){e.onSetLangBegin&&e.onSetLangBegin(t),q.downLang(t),q.onprogress=e.onprogress,q.onfinish=function(o){e.params=o,e.langCode=t,e.onSetLangFinish&&e.onSetLangFinish()}},e}};function $(e){let t=Math.min(e[0].x,e[1].x,e[2].x,e[3].x),o=Math.min(e[0].y,e[1].y,e[2].y,e[3].y),i=Math.max(e[0].x,e[1].x,e[2].x,e[3].x),l=Math.max(e[0].y,e[1].y,e[2].y,e[3].y);return{x:t,y:o,width:i-t,height:l-o}}function R(e){let t=e[1].x-e[0].x,o=e[1].y-e[0].y,i=Math.sqrt(t*t+o*o);t=e[3].x-e[0].x,o=e[3].y-e[0].y;let l=Math.sqrt(t*t+o*o);return{width:Math.round(i),height:Math.round(l)}}function z(e,t){let o=e,i=$(t),l=R(t),n=(i.x,i.width,i.y,i.height,document.createElement("canvas")),a=n.getContext("2d");n.width=i.width,n.height=i.height,a.fillStyle="white",a.fillRect(0,0,i.width,i.height);let r=Math.atan((t[0].y-t[1].y)/(t[0].x-t[1].x));a.drawImage(o,i.x,i.y,i.width,i.height,0,0,i.width,i.height);let s=document.createElement("canvas"),d=s.getContext("2d");s.width=i.width,s.height=i.height,d.translate(i.width/2,i.height/2),d.rotate(-r),d.drawImage(n,-i.width/2,-i.height/2),n.width=l.width,n.height=l.height;let c=i.width/2-l.width/2,u=i.height/2-l.height/2;return a.drawImage(s,-c,-u),{width:l.width,height:l.height,url:n.toDataURL("image/png")}}var F=Z.createNew(),E=o(4434);let H,Q={},O=1;const{t:N}=M.i18n.global;function U(e){for(let t=0;t<H.length;t++)if(e==H[t].id)return t;return-1}function A(e,t){const o=.7;let i=e.rect[0].y,l=t.rect[0].y,n=e.rect[2].y-e.rect[0].y,a=t.rect[2].y-t.rect[0].y;return i+=n*(1-o)/2,l+=a*(1-o)/2,n*=o,a*=o,!(i+n<l)&&!(l+a<i)}function j(){return-1!=navigator.userAgent.indexOf("Firefox")}function X(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),l=e.getHours(),n=e.getMinutes(),a=e.getSeconds();return t+"-"+o+"-"+i+"-"+l+"-"+n+"-"+a}Q.initList=function(e){void 0==H&&(H=e,Q.RecoDataList=H)},Q.selectedId=-1,Q.selectedChangeCB=[],Q.scannedCount=0,Q.changeSelected=function(e){if(e==Q.selectedId)return;Q.selectedId=e;let t=U(e);t<0?L.Z.set("selectedItem",{}):L.Z.set("selectedItem",H[t]),f.trig("SeclectedRecoStateChanged")},Q.deleteAll=function(){let e=0;while(H.length>e)H[e].isScaning?e+=1:H.splice(e,1);Q.changeSelected(e>0?H[0].id:-1)},Q.deleteItem=function(e){let t=U(e);H.splice(t,1),Q.selectedId==e&&(H.length>t?Q.changeSelected(H[t].id):H.length>0?Q.changeSelected(H[H.length-1].id):Q.changeSelected(-1))},Q.getSelectedItem=function(){return console.log("getSelectedItem"),Q.selectedId>-1?H[U(Q.selectedId)]:void 0},Q.getItemByID=function(e){let t=U(e);return t<0?{}:H[t]},Q.addImage=function(e,t){var o=new Image;o.onload=function(){var e={};e.url=this.src,e.selected=!1,e.id=O,e.filename=this.filename,e.imgWidth=this.width,e.imgHeight=this.height,e.layoutMode="Auto",O+=1,H.unshift(e),F.isBusy||Q.recognitionImage(e.id)},o.src=e,o.filename=t},Q.refreshItemText=function(e){let t="",o=e.detail,i=L.Z.get("recThres");"Auto"===e.layoutMode?(e.ignoreEnter=!1,e.mergeSameLine=!0):"CombineLine"===e.layoutMode?e.ignoreEnter=!0:"SplitLine"===e.layoutMode&&(e.ignoreEnter=!1,e.mergeSameLine=!1);for(let l=0;l<o.length;l++)o[l].score<i||(""!==t?(e.ignoreEnter||e.mergeSameLine&&A(o[l-1],o[l])||(t+="\n"),t+=o[l].text):t=o[l].text);e.text=t,f.trig("SeclectedRecoStateChanged")},Q.recognitionImage=function(e){let t;if(F.isBusy)return!1;if(e)t=U(e);else{if(e=Q.selectedId,e<0)return;if(t=U(e),void 0!=H[t].text){for(t=H.length-1;t>=0;t--)if(void 0==H[t].text){e=H[t].id;break}if(t<0)return}}void 0==H[t].text&&(f.trig("RecognitionBegin"),F.onRecognitionCompleted=o=>{t=U(e),t<0||(H[t].detail=o,H[t].isScaning=!1,H[t].endTime=(new Date).getTime(),H[t].costTime=H[t].endTime-H[t].startTime,Q.scannedCount++,Q.refreshItemText(H[t]),Q.selectedId==H[t].id&&f.trig("SeclectedRecoStateChanged"),console.log("recognitionImage finish cost:",H[t].costTime,"ms"),Q.recognitionImage())},F.onImageLoad=(e,o)=>{t=U(o),Q.selectedId<=0&&Q.changeSelected(H[t].id)},H[t].isScaning=!0,H[t].startTime=(new Date).getTime(),F.ocrImageUrl(H[t].url,e),console.log("ocrImageUrl",e))},Q.reRecoAll=function(e){for(const t of H)t.text=void 0;Q.recognitionImage(),f.trig("SeclectedRecoStateChanged")},Q.reReco=function(e){void 0==e&&(e=Q.selectedId);let t=U(e);H[t].text=void 0,Q.recognitionImage(),e==Q.selectedId&&f.trig("SeclectedRecoStateChanged")},Q.addFromClipboard=function(e){if(void 0==e)j()?E.Z.create({type:"warning",message:"imagelist.tips_clipboard_firefox_only_hotkey"}):navigator.clipboard.read().then((e=>{console.log("Pasted content: ",e);var t=!1;for(let i=0;i<e.length;i++)for(var o of e[i].types)-1!==o.indexOf("image")&&(t=!0,e[i].getType(o).then((e=>{let t=URL.createObjectURL(e);Q.addImage(t,"Clipboard_"+X()+".png")})));t||E.Z.create({type:"warning",message:N("imagelist.tips_clipboard_no_image")})})).catch((e=>{console.log("i18n",M.i18n),E.Z.create({type:"negative",message:N("imagelist.tips_clipboard_faild")})}));else for(const t of e.clipboardData.items){if(0!=t.type.indexOf("image"))continue;let o=t.getAsFile(),i=URL.createObjectURL(o);Q.addImage(i,"Clipboard_"+X()+".png"),e.preventDefault(),e.stopPropagation()}},window.addEventListener("paste",(async function(e){console.log("addFromClipboard",e),Q.addFromClipboard(e)})),Q.empty=function(){return!H.length},(0,i.dD)("data-v-3dac1f96");const Y=["id"],G={key:1,class:"iconlabel block"};function J(e,t,o,l,n,r){const s=(0,i.up)("q-icon");return(0,i.wg)(),(0,i.iD)("div",{id:o.id,class:(0,a.C_)(["BtnBound",{disable:o.disable}]),style:(0,a.j5)("font-size: "+(o.IconSize?o.IconSize:"30px"))},[o.IconName?((0,i.wg)(),(0,i.j4)(s,{key:0,name:o.IconName},null,8,["name"])):(0,i.kq)("",!0),o.label?((0,i.wg)(),(0,i.iD)("span",G,(0,a.zw)(o.label),1)):(0,i.kq)("",!0)],14,Y)}(0,i.Cn)();const K={props:["IconName","label","disable","IconSize","id"]};var ee=o(4554),te=o(7518),oe=o.n(te);K.render=J,K.__scopeId="data-v-3dac1f96";const ie=K;oe()(K,"components",{QIcon:ee.Z}),(0,i.dD)("data-v-02045226");const le=["src"],ne={class:"text-weight-bold"};function ae(e,t,o,l,n,r){const s=(0,i.up)("q-icon"),d=(0,i.up)("q-space"),c=(0,i.up)("q-btn"),u=(0,i.up)("q-bar"),m=(0,i.up)("q-header"),g=(0,i.up)("q-toolbar"),h=(0,i.up)("q-footer"),p=(0,i.up)("q-input"),f=(0,i.up)("q-select"),x=(0,i.up)("q-form"),w=(0,i.up)("q-page"),v=(0,i.up)("q-page-container"),b=(0,i.up)("q-layout"),I=(0,i.up)("q-dialog"),T=(0,i.up)("q-linear-progress"),y=(0,i.up)("q-card-section"),C=(0,i.up)("q-card"),k=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[o.modelValue&&n.showDialog?((0,i.wg)(),(0,i.j4)(I,{key:0,ref:"dialog",modelValue:o.modelValue,onHide:t[7]||(t[7]=t=>e.$emit("update:modelValue",!1))},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{ref:"header"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{name:"o_file_download"}),(0,i._)("div",null,(0,a.zw)(e.$t("exportPDF")),1),(0,i.Wm)(d),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",icon:"close"},null,512),[[k]])])),_:1})])),_:1},512),(0,i.Wm)(h,{ref:"footer"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{dense:"",flat:"",icon:n.pdfPreviewUrl?"o_settings":"o_preview",onClick:t[0]||(t[0]=e=>{n.pdfPreviewUrl?n.pdfPreviewUrl=void 0:r.exportPDF(!0)}),size:"md",label:n.pdfPreviewUrl?e.$t("exportPDF.config"):e.$t("exportPDF.preview")},null,8,["icon","label"]),(0,i.Wm)(d),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",icon:"o_file_download",onClick:t[1]||(t[1]=e=>r.exportPDF(!1)),size:"md",label:e.$t("exportPDF.export")},null,8,["label"]),[[k]]),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",size:"md",icon:"close",label:e.$t("exportPDF.cancel")},null,8,["label"]),[[k]])])),_:1})])),_:1},512),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[n.pdfPreviewUrl?((0,i.wg)(),(0,i.iD)("iframe",{key:0,ref:"pdfIframe",src:n.pdfPreviewUrl,frameborder:"0",width:"100%",style:{"min-height":"inherit"}},null,8,le)):(0,i.kq)("",!0),n.pdfPreviewUrl?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(x,{key:1,class:"q-ma-md q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{filled:"",modelValue:n.fileName,"onUpdate:modelValue":t[2]||(t[2]=e=>n.fileName=e),label:e.$t("exportPDF.filename"),"lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("exportPDF.mustHaveFilename")]},null,8,["modelValue","label","rules"]),(0,i.Wm)(f,{"map-options":"",outlined:"",label:e.$t("exportPDF.exportImage"),modelValue:n.exportImage.value,"onUpdate:modelValue":t[3]||(t[3]=e=>n.exportImage.value=e),options:n.exportImage.list},null,8,["label","modelValue","options"]),(0,i.Wm)(f,{"map-options":"",outlined:"",label:e.$t("exportPDF.exportData"),modelValue:n.exportData.value,"onUpdate:modelValue":t[4]||(t[4]=e=>n.exportData.value=e),options:n.exportData.list},null,8,["label","modelValue","options"]),(0,i.Wm)(f,{"map-options":"",outlined:"",label:e.$t("exportPDF.textVisible"),modelValue:n.textVisible.value,"onUpdate:modelValue":t[5]||(t[5]=e=>n.textVisible.value=e),options:n.textVisible.list},null,8,["label","modelValue","options"]),(0,i.Wm)(f,{"map-options":"",outlined:"",label:e.$t("exportPDF.withOriImage"),modelValue:n.withOriImage.value,"onUpdate:modelValue":t[6]||(t[6]=e=>n.withOriImage.value=e),options:n.withOriImage.list},null,8,["label","modelValue","options"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,i.kq)("",!0),n.showInitDialog?((0,i.wg)(),(0,i.j4)(I,{key:1,modelValue:!0,onHide:t[8]||(t[8]=t=>e.$emit("update:modelValue",!1)),seamless:"",position:"bottom"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{style:{width:"350px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{value:n.downPrecent,color:"pink"},null,8,["value"]),(0,i.Wm)(y,{class:"row items-center no-wrap"},{default:(0,i.w5)((()=>[(0,i._)("div",ne,(0,a.zw)(e.$t("exportPDF.downloadingModule")),1),(0,i.Wm)(d),(0,i.wy)((0,i.Wm)(c,{flat:"",round:"",icon:"close"},null,512),[[k]])])),_:1})])),_:1})])),_:1})):(0,i.kq)("",!0)],64)}(0,i.Cn)();var re=o(9587);const se=o.p+"97a745e4ec4d6c4f3da96103363915ee.tf";let de={},ce={};var ue={Preview:"Preview",SaveToFile:"SaveToFile"},me={NoAttach:"WithoutOriImage",AttachOnNext:"OriImageOnNext",AttachOnLast:"OriImageOnLast"};function ge(){ce.action=ue.Preview,ce.filename="Pearocr1",ce.onlyText=!1,ce.visibleText=!0,ce.ImageAttached=me.AttachOnNext,ce.textBGColor="#faebd7",ce.addPageNum=!0,ce.pageNumPading=4,ce.pageNumSize=9,ce.addWatermark=!0,ce.watermarkPading=4,ce.watermarkSize=9,ce.watermarkText="power by pearocr.com"}function he(e){return e[3]}function pe(e){return-Math.atan((e[0].y-e[1].y)/(e[0].x-e[1].x))}function fe(e){let t={},o=e[0],i=e[1],l=Math.sqrt((o.x-i.x)*(o.x-i.x)*1+(o.y-i.y)*(o.y-i.y));o=e[1],i=e[2];let n=Math.sqrt((o.x-i.x)*(o.x-i.x)*1+(o.y-i.y)*(o.y-i.y));return t.width=Math.max(l,n),t.height=Math.min(l,n),t}function xe(e){return de.pageWidth=e.imgWidth,de.pageHeight=e.imgHeight+2*ce.watermarkPading+ce.watermarkSize,ce.addPageNum&&(de.pageHeight+=2*ce.pageNumPading+ce.pageNumSize),[de.pageHeight,de.pageWidth]}function we(e,t){if(!ce.addPageNum)return;let o=de.doc;o.setFontSize(ce.watermarkSize);let i=de.pageHeight-ce.pageNumPading;ce.addWatermark&&(i-=2*ce.watermarkPading+ce.watermarkSize),o.text(e.toString()+" / "+t.toString(),de.pageWidth/2,i,{align:"center",baseline:"bottom"})}function ve(){if(!ce.addWatermark)return;let e=de.doc;e.setFontSize(ce.watermarkSize);let t=e.getTextColor();e.setTextColor("#1a0dbe"),e.textWithLink(ce.watermarkText,de.pageWidth/2,de.pageHeight-ce.watermarkPading,{align:"center",baseline:"bottom",url:"https://pearocr.com"}),e.setTextColor(t)}function be(e,t,o,i,l){let n=xe(t);e.addPage(n,n[1]>n[0]?"l":"p"),e.addImage(t.url,"JPEG",0,0,t.imgWidth,t.imgHeight,l,"FAST"),we(o,i),ve()}ge(),de.isInit=!1,de.init=()=>{if(de.xhr)return;let e=new XMLHttpRequest;e.open("GET",se),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.responseType="text",e.onprogress=function(e){e.lengthComputable&&f.set("PDFRenderInitProgress",e.loaded/e.total)},e.onload=function(e){4===this.readyState&&200===this.status&&(de.font=this.response,de.isInit=!0,f.trig("PDFRenderInited"))},e.send(null),de.xhr=e};var Ie=function(){this.addFileToVFS("simhei-normal.ttf",de.font),this.addFont("simhei-normal.ttf","simhei","normal"),this.addFont("simhei-normal.ttf","simhei","bold"),this.addFont("simhei-normal.ttf","simhei","italic"),this.addFont("simhei-normal.ttf","simhei","bolditalic")};let Te;re.kH.API.events.push(["addFonts",Ie]),de.render=(e,t)=>{Object.assign(ce,t),Array.isArray(e)||(e=[e]);let o=e.length;ce.ImageAttached!=me.NoAttach&&(o*=2);let i,l=1,n=1;for(const a of e){let e=xe(a),t="img_"+n.toString();n++,void 0==i?(de.doc=new re.kH({orientation:e[1]>e[0]?"l":"p",unit:"px",format:e,putOnlyUsedFonts:!0,floatPrecision:16,hotfixes:["px_scaling"]}),i=de.doc):i.addPage(e,e[1]>e[0]?"l":"p"),i.setFont("simhei"),!ce.onlyText&&ce.visibleText&&i.addImage(a.url,"JPEG",0,0,a.imgWidth,a.imgHeight,t,"FAST");for(const o of a.detail){let e=o.textEdited?o.textEdited:o.text;if(!e)continue;i.setFillColor(ce.textBGColor),i.moveTo(o.rect[0].x,o.rect[0].y),i.lineTo(o.rect[1].x,o.rect[1].y),i.lineTo(o.rect[2].x,o.rect[2].y),i.lineTo(o.rect[3].x,o.rect[3].y),i.lineTo(o.rect[0].x,o.rect[0].y),i.fill();let t=fe(o.rect);i.setFontSize(.85*t.height);let l=i.getFontSize(),n=i.context2d.measureText(e).width,a=0;n>t.width&&(l*=t.width/n,i.setFontSize(.85*l),n=i.context2d.measureText(e).width),n<t.width&&e.length>1&&(a=(t.width-n)/(e.length-1),n=t.width);let r=pe(o.rect),s=he(o.rect);i.text(e,s.x,s.y,{baseline:"bottom",angle:180*r/Math.PI,charSpace:a})}ce.onlyText||ce.visibleText||i.addImage(a.url,"JPEG",0,0,a.imgWidth,a.imgHeight,t,"FAST"),we(l,o),l+=1,ve(),ce.visibleText&&ce.ImageAttached==me.AttachOnNext&&(be(i,a,l,o,t),l+=1)}if(n=1,ce.visibleText&&ce.ImageAttached==me.AttachOnLast)for(const a of e){n.toString();n++,be(i,a,l,o),l+=1}if(ce.action==ue.Preview)return i.output("datauristring");ce.action!=ue.SaveToFile||i.save(ce.filename)};const ye={data(){return{showDialog:!1,showInitDialog:!1,downPrecent:0,showText:!0,recLangCode:"",fileName:"PearOCR",pdfPreviewUrl:"",model:null,exportImage:{value:"AllImages",list:[{label:this.$t("exportPDF.AllImages"),value:"AllImages"},{label:this.$t("exportPDF.CurrentImage"),value:"CurrentImage"}]},exportData:{value:"ExportTextImage",list:[{label:this.$t("exportPDF.ExportTextImage"),value:"ExportTextImage"},{label:this.$t("exportPDF.ExportTextOnly"),value:"ExportTextOnly"}]},textVisible:{value:"Visible",list:[{label:this.$t("exportPDF.Visible"),value:"Visible"},{label:this.$t("exportPDF.Invisible"),value:"Invisible"}]},withOriImage:{value:"WithoutOriImage",list:[{label:this.$t("exportPDF.WithoutOriImage"),value:"WithoutOriImage"},{label:this.$t("exportPDF.OriImageOnNext"),value:"OriImageOnNext"},{label:this.$t("exportPDF.OriImageOnLast"),value:"OriImageOnLast"}]}}},props:["modelValue"],emits:["update:modelValue"],created(){Te=this,de.isInit?this.showDialog=!0:(f.addevent("PDFRenderInitProgress",(function(e){Te.downPrecent=e})),f.addevent("PDFRenderInited",(function(){Te.showInitDialog=!1,Te.showDialog=!0})),this.showInitDialog=!0,de.init())},methods:{exportPDF(e){let t;t="AllImages"===this.exportImage.value?H:[Q.getSelectedItem()];const o={};o.onlyText="ExportTextOnly"===this.exportData.value,o.filename=this.fileName?this.fileName:"PearOCR",o.visibleText="Visible"===this.textVisible.value,o.ImageAttached=this.withOriImage.value,o.action=e?ue.Preview:ue.SaveToFile,this.pdfPreviewUrl=de.render(t,o)}}};var Ce=o(5926),ke=o(3066),Se=o(3812),_e=o(846),De=o(2025),We=o(8240),Ve=o(1762),qe=o(9570),Le=o(2652),Pe=o(4379),Me=o(5269),Be=o(4842),Ze=o(362),$e=o(151),Re=o(1598),ze=o(5589),Fe=o(677);ye.render=ae,ye.__scopeId="data-v-02045226";const Ee=ye;oe()(ye,"components",{QDialog:Ce.Z,QLayout:ke.Z,QHeader:Se.Z,QBar:_e.Z,QIcon:ee.Z,QSpace:De.Z,QBtn:We.Z,QFooter:Ve.Z,QToolbar:qe.Z,QPageContainer:Le.Z,QPage:Pe.Z,QForm:Me.Z,QInput:Be.Z,QSelect:Ze.Z,QCard:$e.Z,QLinearProgress:Re.Z,QCardSection:ze.Z}),oe()(ye,"directives",{ClosePopup:Fe.Z}),(0,i.dD)("data-v-2f0695ca");const He=["value"];function Qe(e,t,o,l,n,r){const s=(0,i.up)("q-icon"),d=(0,i.up)("q-space"),c=(0,i.up)("q-btn"),u=(0,i.up)("q-bar"),m=(0,i.up)("q-header"),g=(0,i.up)("q-toolbar"),h=(0,i.up)("q-footer"),p=(0,i.up)("q-input"),f=(0,i.up)("q-select"),x=(0,i.up)("q-form"),w=(0,i.up)("q-page"),v=(0,i.up)("q-page-container"),b=(0,i.up)("q-layout"),I=(0,i.up)("q-dialog"),T=(0,i.Q2)("close-popup");return o.modelValue?((0,i.wg)(),(0,i.j4)(I,{key:0,modelValue:o.modelValue,onHide:t[6]||(t[6]=t=>e.$emit("update:modelValue",!1))},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{ref:"header"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{name:"o_file_download"}),(0,i._)("div",null,(0,a.zw)(e.$t("exportTXT")),1),(0,i.Wm)(d),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",icon:"close"},null,512),[[T]])])),_:1})])),_:1},512),(0,i.Wm)(h,{ref:"footer"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{dense:"",flat:"",icon:n.previewTxt?"o_settings":"o_preview",onClick:t[0]||(t[0]=e=>{n.previewTxt?n.previewTxt=void 0:r.exportTXT(!0)}),size:"md",label:n.previewTxt?e.$t("exportPDF.config"):e.$t("exportPDF.preview")},null,8,["icon","label"]),(0,i.Wm)(d),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",icon:"o_file_download",onClick:t[1]||(t[1]=e=>r.exportTXT(!1,"docx")),size:"md",label:e.$t("exportPDF.exportDocx")},null,8,["label"]),[[T]]),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",icon:"o_file_download",onClick:t[2]||(t[2]=e=>r.exportTXT(!1,"txt")),size:"md",label:e.$t("exportPDF.exportTxt")},null,8,["label"]),[[T]]),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",size:"md",icon:"close",label:e.$t("exportPDF.cancel")},null,8,["label"]),[[T]])])),_:1})])),_:1},512),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[n.previewTxt?((0,i.wg)(),(0,i.iD)("textarea",{key:0,width:"100%",style:{"min-height":"inherit"},class:"textItem",value:n.previewTxt},null,8,He)):(0,i.kq)("",!0),n.previewTxt?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(x,{key:1,class:"q-ma-md q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{filled:"",modelValue:n.fileName,"onUpdate:modelValue":t[3]||(t[3]=e=>n.fileName=e),label:e.$t("exportPDF.filename"),"lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("exportPDF.mustHaveFilename")]},null,8,["modelValue","label","rules"]),(0,i.Wm)(f,{outlined:"","map-options":"",label:e.$t("exportTXT.exportText"),modelValue:n.exportText.value,"onUpdate:modelValue":t[4]||(t[4]=e=>n.exportText.value=e),options:n.exportText.list},null,8,["label","modelValue","options"]),(0,i.Wm)(f,{outlined:"","map-options":"",label:e.$t("exportTXT.textDivided"),modelValue:n.textDivided.value,"onUpdate:modelValue":t[5]||(t[5]=e=>n.textDivided.value=e),options:n.textDivided.list},null,8,["label","modelValue","options"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,i.kq)("",!0)}(0,i.Cn)();var Oe=o(63),Ne=o.n(Oe),Ue=o(7405),Ae=o.n(Ue),je=o(7434),Xe=o.n(je),Ye=o(3139);const Ge=o.p+"08dbfb895d58b2c5d17d650577ff10e7.docx";function Je(e,t){Xe().getBinaryContent(e,t)}function Ke(e,t){Je(Ge,(function(o,i){if(o)throw o;const l=new(Ae())(i),n=new(Ne())(l,{paragraphLoop:!0,linebreaks:!0});n.render({TEXT:t});const a=n.getZip().generate({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});(0,Ye.saveAs)(a,e)}))}function et(e,t){const o=document.createElement("a");if(o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),o.setAttribute("download",e),document.createEvent){const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),o.dispatchEvent(e)}else o.click()}const tt={data(){return{fileName:"PearOCR",previewTxt:"",exportText:{value:"AllTexts",list:[{label:this.$t("exportTXT.AllTexts"),value:"AllTexts"},{label:this.$t("exportTXT.CurrentText"),value:"CurrentText"}]},textDivided:{value:"DividedTexts",list:[{label:this.$t("exportTXT.DividedTexts"),value:"DividedTexts"},{label:this.$t("exportTXT.Undivided"),value:"Undivided"}]}}},props:["modelValue"],emits:["update:modelValue"],methods:{exportTXT(e,t){let o,i="";o="AllTexts"===this.exportText.value?H:[Q.getSelectedItem()];for(const l of o)"DividedTexts"===this.textDivided.value&&(i&&(i+="\n"),i+="------------ "+l.filename+" ------------\n"),i+=l.text,i+="\n";i+="\n------------ prower by PearOCR.com ------------\n",e?this.previewTxt=i:"txt"===t?et(this.fileName,i):"docx"===t&&Ke(this.fileName,i)}}};tt.render=Qe,tt.__scopeId="data-v-2f0695ca";const ot=tt;oe()(tt,"components",{QDialog:Ce.Z,QLayout:ke.Z,QHeader:Se.Z,QBar:_e.Z,QIcon:ee.Z,QSpace:De.Z,QBtn:We.Z,QFooter:Ve.Z,QToolbar:qe.Z,QPageContainer:Le.Z,QPage:Pe.Z,QForm:Me.Z,QInput:Be.Z,QSelect:Ze.Z}),oe()(tt,"directives",{ClosePopup:Fe.Z}),(0,i.dD)("data-v-58cbe3fc");const it={class:"q-gutter-md row items-start ConfigureGroup"},lt={class:"q-gutter-md row items-start ConfigureGroup"},nt={key:0,class:"q-gutter-md row items-start ConfigureGroup"};function at(e,t,o,l,n,r){const s=(0,i.up)("q-icon"),d=(0,i.up)("q-space"),c=(0,i.up)("q-btn"),u=(0,i.up)("q-bar"),m=(0,i.up)("q-header"),g=(0,i.up)("q-toolbar"),h=(0,i.up)("q-footer"),p=(0,i.up)("q-input"),f=(0,i.up)("q-select"),x=(0,i.up)("q-toggle"),w=(0,i.up)("q-form"),v=(0,i.up)("q-page"),b=(0,i.up)("q-page-container"),I=(0,i.up)("q-layout"),T=(0,i.up)("q-dialog"),y=(0,i.Q2)("close-popup");return o.modelValue?((0,i.wg)(),(0,i.j4)(T,{key:0,modelValue:o.modelValue,onHide:t[11]||(t[11]=t=>e.$emit("update:modelValue",!1))},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{ref:"header"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{name:"o_settings",onClick:r.onIconClicked},null,8,["onClick"]),(0,i._)("div",null,(0,a.zw)(e.$t("configure")),1),(0,i.Wm)(d),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",icon:"close"},null,512),[[y]])])),_:1})])),_:1},512),(0,i.Wm)(h,{ref:"footer"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{dense:"",flat:"",size:"md",icon:"restore",onClick:t[0]||(t[0]=e=>r.resetConfigure()),label:e.$t("configure.reset")},null,8,["label"]),(0,i.Wm)(d),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",icon:"o_check",onClick:t[1]||(t[1]=e=>r.saveConfigure()),size:"md",label:e.$t("configure.apply")},null,8,["label"]),[[y]]),(0,i.wy)((0,i.Wm)(c,{dense:"",flat:"",size:"md",icon:"close",label:e.$t("configure.cancel")},null,8,["label"]),[[y]])])),_:1})])),_:1},512),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"q-ma-md q-gutter-md"},{default:(0,i.w5)((()=>[(0,i._)("div",it,[(0,i.Wm)(p,{class:"col",modelValue:n.config.highlightErrWordThres,"onUpdate:modelValue":t[2]||(t[2]=e=>n.config.highlightErrWordThres=e),type:"number",label:e.$t("configure.errWordThres")},null,8,["modelValue","label"]),(0,i.Wm)(f,{class:"col","map-options":"",outlined:"",modelValue:n.config.errWordHandle.value,"onUpdate:modelValue":t[3]||(t[3]=e=>n.config.errWordHandle.value=e),label:e.$t("configure.errWordHandle"),options:n.config.errWordHandle.list},null,8,["modelValue","label","options"])]),(0,i._)("div",lt,[(0,i.Wm)(p,{class:"col",modelValue:n.config.recThres,"onUpdate:modelValue":t[4]||(t[4]=e=>n.config.recThres=e),type:"number",label:e.$t("configure.errTextThres")},null,8,["modelValue","label"]),(0,i.Wm)(x,{class:"col",modelValue:n.config.keepLowScore,"onUpdate:modelValue":t[5]||(t[5]=e=>n.config.keepLowScore=e),label:e.$t("configure.errTextHighlight")},null,8,["modelValue","label"])]),(0,i.Wm)(f,{outlined:"",modelValue:n.config.sortingType.value,"onUpdate:modelValue":t[6]||(t[6]=e=>n.config.sortingType.value=e),label:e.$t("configure.sortingOfNewImages"),options:n.config.sortingType.list,"map-options":""},null,8,["modelValue","label","options"]),n.Advanced?((0,i.wg)(),(0,i.iD)("div",nt,[(0,i.Wm)(p,{class:"col",modelValue:n.config.unclipRadio,"onUpdate:modelValue":t[7]||(t[7]=e=>n.config.unclipRadio=e),label:"Un clip radio"},null,8,["modelValue"]),(0,i.Wm)(p,{class:"col",modelValue:n.config.limitSideLen,"onUpdate:modelValue":t[8]||(t[8]=e=>n.config.limitSideLen=e),label:"limit side length"},null,8,["modelValue"]),(0,i.Wm)(p,{class:"col",modelValue:n.config.splitThres,"onUpdate:modelValue":t[9]||(t[9]=e=>n.config.splitThres=e),label:"split thres"},null,8,["modelValue"]),(0,i.Wm)(p,{class:"col",modelValue:n.config.splitOverlap,"onUpdate:modelValue":t[10]||(t[10]=e=>n.config.splitOverlap=e),label:"split overlap"},null,8,["modelValue"])])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,i.kq)("",!0)}(0,i.Cn)();const rt={data(){return{Advanced:!1,numConfigList:[],config:{errWordHandle:{value:"Normal",list:[{label:this.$t("configure.errWordHandle.Normal"),value:"Normal"},{label:this.$t("configure.errWordHandle.Highlight"),value:"Highlight"},{label:this.$t("configure.errWordHandle.IgnoreTwoEnds"),value:"IgnoreTwoEnds"},{label:this.$t("configure.errWordHandle.IgnoreTwoEndsHighlistOther"),value:"IgnoreTwoEndsHighlistOther"}]},highlightErrWordThres:.6,recThres:.6,unclipRadio:1.6,limitSideLen:960,splitThres:1,splitOverlap:64,keepLowScore:!1,sortingType:{value:"byAddOrder",list:[{label:this.$t("configure.sortingType.byAddOrder"),value:"byAddOrder"},{label:this.$t("configure.sortingType.byFileName"),value:"byFileName"}]}}}},props:["modelValue"],emits:["update:modelValue"],created(){for(const e in this.config)Object.hasOwnProperty.call(this.config,e)&&"number"===typeof this.config[e]&&this.numConfigList.push(e);console.log(this.numConfigList)},mounted(){L.Z.getToDict(this.config)},methods:{resetConfigure(){L.Z.reset(),L.Z.getToDict(this.config)},configTurnToNumber(){for(const e of this.numConfigList)"string"===typeof this.config[e]&&(this.config[e]=parseFloat(this.config[e]))},saveConfigure(){this.configTurnToNumber(),L.Z.setFromDict(this.config),L.Z.save()},onIconClicked(){this.Advanced||(void 0===this.iconClickCnt&&(this.iconClickCnt=0),this.iconClickCnt++,7===this.iconClickCnt&&(this.$q.notify({message:"打开高级设置",color:"blue",timeout:500}),this.Advanced=!0))}}};var st=o(8886);rt.render=at,rt.__scopeId="data-v-58cbe3fc";const dt=rt;oe()(rt,"components",{QDialog:Ce.Z,QLayout:ke.Z,QHeader:Se.Z,QBar:_e.Z,QIcon:ee.Z,QSpace:De.Z,QBtn:We.Z,QFooter:Ve.Z,QToolbar:qe.Z,QPageContainer:Le.Z,QPage:Pe.Z,QForm:Me.Z,QInput:Be.Z,QSelect:Ze.Z,QToggle:st.Z}),oe()(rt,"directives",{ClosePopup:Fe.Z});let ct,ut=1,mt=-1;const gt={components:{ToolBtn:ie,ExportPdf:Ee,ExportTxt:ot,Configure:dt},data(){return{ExportPdfShow:!1,ExportTxtShow:!1,ConfigureShow:!1,RecoDataList:[],selectedItem:void 0,progressVal:0,showMenu:!1,MenuItems:[],ToolsItems:[{label:"menu.exportPDF",func:function(){ct.ExportPdfShow=!0},icon:"o_picture_as_pdf",cond:this.listNotEmpty},{label:"menu.exportTXT",cond:this.listNotEmpty,func:function(){ct.ExportTxtShow=!0},icon:"o_description"},{label:"menu.deleteAllImages",func:this.onDeleteAll,cond:this.listNotEmpty,icon:"o_delete_forever"},{label:"menu.reIdentifyAll",func:Q.reRecoAll,cond:this.listNotEmpty,icon:"o_restart_alt"},{label:"menu.configure",func:function(){ct.ConfigureShow=!0},icon:"o_settings"}]}},created(){ct=this,Q.initList(ct.RecoDataList),ct.RecoDataList=Q.RecoDataList,f.addevent("RecognitionBegin",(()=>{ct.progressVal=0})),F.onProgress=function(e,t){ct.progressVal=50*e+Math.round(t/2),100===ct.progressVal&&(ct.progressVal=99)},L.Z.addMonitor(["selectedItem"],this)},mounted(){f.addevent("WindowResize",this.onWindowResize,!0),L.Z.addMonitor("uiLangCode",(function(){ct.$nextTick((function(){ct.adjustToolbar(!0)}))}))},methods:{adjustToolbar(e){mt=-1;const t=ct.$refs.gapLine.offsetWidth;if(t>0&&0===ct.MenuItems.length||t<=0&&0===ct.ToolsItems.length)ut=t;else{if(console.log(e,"lastWidth:",ut,"detectWidth:",t),(ut>0||e)&&t>0){const e=ct.MenuItems[ct.MenuItems.length-1];ct.MenuItems.splice(ct.MenuItems.length-1,1),ct.ToolsItems.push(e),mt=setTimeout(ct.adjustToolbar,100)}else if(t<=0){const e=ct.ToolsItems[ct.ToolsItems.length-1];ct.ToolsItems.splice(ct.ToolsItems.length-1,1),ct.MenuItems.push(e),mt=setTimeout(ct.adjustToolbar,100)}ut=t}},onWindowResize(){console.log("onWindowResize"),mt>=0&&clearTimeout(mt),this.adjustToolbar(!0)},listNotEmpty(){return!Q.empty()},onUploadClick(){f.trig("UploadImage")},onPasteImage(){Q.addFromClipboard()},onItemClick(e){Q.changeSelected(e.id)},onDeleteAll(){Q.deleteAll(),Q.selectedId>0&&this.$q.notify({message:this.$t("message.waitIdentityFinish"),color:"red",timeout:500})},onItemDelete(e){e.isScaning?this.$q.notify({message:this.$t("message.waitIdentityFinish"),color:"red",timeout:500}):Q.deleteItem(e.id)}},watch:{RecoDataList:{deep:!0,handler(e){}}}};var ht=o(7369),pt=o(6941),ft=o(6122),xt=o(8506),wt=o(6335),vt=o(7011),bt=o(3414),It=o(2035);gt.render=h,gt.__scopeId="data-v-36e6e9c0";const Tt=gt;function yt(e,t,o,l,n,a){return(0,i.wg)(),(0,i.iD)("input",{ref:"inputFile",type:"file",style:{display:"none"},onChange:t[0]||(t[0]=e=>a.addImgPreview()),accept:"image/*",multiple:""},null,544)}let Ct;oe()(gt,"components",{QBtn:We.Z,QVirtualScroll:ht.Z,QInnerLoading:pt.Z,QCircularProgress:ft.Z,QSpinnerIos:xt.Z,QIcon:ee.Z,QSpace:De.Z,QMenu:wt.Z,QList:vt.Z,QItem:bt.Z,QItemSection:It.Z}),oe()(gt,"directives",{ClosePopup:Fe.Z});const kt={data(){return{RecoDataList:[]}},created(){Ct=this,Q.initList(Ct.RecoDataList),Ct.RecoDataList=Q.RecoDataList,f.addevent("UploadImage",(()=>{Ct.$refs.inputFile.dispatchEvent(new MouseEvent("click"))}))},methods:{addImgPreview(e){e||(e=this.$refs.inputFile.files);for(const t of e){if(!t)return void console.log("error");{if("image"!==t.type.substring(0,5))return;const e=new FileReader;e.readAsDataURL(t),e.filename=t.name,e.onload=function(t){Q.addImage(this.result,e.filename)}}}this.$refs.inputFile.value=""}}};kt.render=yt;const St=kt;(0,i.dD)("data-v-ce8f36a6");const _t={key:1,style:{height:"100%"}};function Dt(e,t,o,l,n,a){const r=(0,i.up)("RecLangToolbar"),s=(0,i.up)("RViewImageText"),d=(0,i.up)("q-avatar"),c=(0,i.up)("RViewText"),u=(0,i.up)("q-splitter");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r),(0,i._)("div",{class:"MainImageView",onClick:t[1]||(t[1]=(...e)=>a.onMainImageViewClick&&a.onMainImageViewClick(...e))},[e.$q.screen.gt.sm?((0,i.wg)(),(0,i.j4)(u,{key:0,modelValue:n.splitterModel,"onUpdate:modelValue":t[0]||(t[0]=e=>n.splitterModel=e),style:{height:"100%"},"before-class":"NoScroll","separator-class":"splitter bg-blue-grey-7"},{before:(0,i.w5)((()=>[(0,i.Wm)(s)])),separator:(0,i.w5)((()=>[(0,i.Wm)(d,{"text-color":"grey-1",size:"46px",icon:"more_vert"})])),after:(0,i.w5)((()=>[(0,i.Wm)(c,{ref:"textView"},null,512)])),_:1},8,["modelValue"])):(0,i.kq)("",!0),e.$q.screen.gt.sm?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",_t,["Image"==n.ViewMode||void 0==n.selectedItem.text?((0,i.wg)(),(0,i.j4)(s,{key:0})):(0,i.kq)("",!0),"Text"==n.ViewMode&&void 0!=n.selectedItem.text?((0,i.wg)(),(0,i.j4)(c,{key:1,ref:"textView"},null,512)):(0,i.kq)("",!0)]))])],64)}(0,i.Cn)(),(0,i.dD)("data-v-75c987ec");const Wt={class:"MainBox"},Vt={ref:"mainBox",class:"imagebox"},qt=["src"],Lt={key:0,class:"ToolBarPos ToolbarBorder"},Pt={class:"Toolbar text-light-blue"};function Mt(e,t,o,l,n,a){const r=(0,i.up)("RotateText"),s=(0,i.up)("ToolBtn"),d=(0,i.up)("CommonBar"),c=(0,i.up)("q-spinner-box"),u=(0,i.up)("q-inner-loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Wt,[(0,i._)("div",Vt,[(0,i._)("img",{ref:"img",id:"mainImage",ondragstart:"return false;",src:n.selectedItem.url},null,8,qt),n.selectedItem.text&&n.selectedItem.imgWidth?((0,i.wg)(),(0,i.j4)(r,{key:0,class:"poplayer",showBorder:n.showBorder,showText:n.showText,recoItem:n.selectedItem},null,8,["showBorder","showText","recoItem"])):(0,i.kq)("",!0)],512)]),void 0!=n.selectedItem.text?((0,i.wg)(),(0,i.iD)("div",Lt,[(0,i._)("div",Pt,[e.$q.screen.gt.sm?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(s,{key:0,IconName:"o_article",label:e.$t("RViewImageText.text"),onClick:t[0]||(t[0]=e=>a.switchViewModel("Text"))},null,8,["label"])),(0,i.Wm)(s,{IconName:"o_text_format",label:"",disable:!n.showText,onClick:t[1]||(t[1]=e=>n.showText=!n.showText)},null,8,["disable"]),(0,i.Wm)(s,{IconName:"o_crop_16_9",label:"",disable:!n.showBorder,onClick:t[2]||(t[2]=e=>n.showBorder=!n.showBorder)},null,8,["disable"])]),(0,i.Wm)(d,{noteText:n.imageScaleVal},null,8,["noteText"])])):(0,i.kq)("",!0),(0,i.Wm)(u,{showing:n.selectedItem.isScaning},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{size:"80px",color:"primary"})])),_:1},8,["showing"])],64)}(0,i.Cn)();let Bt={lastId:0},Zt=!1;function $t(e){let t=e.getAttribute("ImgHandleDataID");if(void 0==t){let o={ele:e,srcSize:[e.offsetWidth,e.offsetHeight],translate:[0,0],scale:1,maxScaleVal:10,minScaleVal:128/Math.max(e.offsetWidth,e.offsetHeight),zoomOrigin:[0,0],lastTouchTime:0,applyTransform(){this.onScale&&this.onScale(this.scale),this.ele.style.transform="translate("+this.translate[0].toString()+"px, "+this.translate[1].toString()+"px)scale("+this.scale.toString()+")"},move(e,t){e+=this.translate[0],t+=this.translate[1];let o=this.ele.parentNode,i=o.offsetWidth,l=o.offsetHeight,n=this.ele.offsetWidth*this.scale,a=this.ele.offsetHeight*this.scale,r=Math.max(i/2,i-n),s=Math.min(i/2-n,0);e>r&&(e=r),e<s&&(e=s),r=Math.max(l/2,l-a),s=Math.min(l/2-a,0),t>r&&(t=r),t<s&&(t=s),this.translate[0]=e,this.translate[1]=t},setPos(e,t){this.translate[0]=e,this.translate[1]=t},zoom(e){let t=this.zoomOrigin[0]*this.scale,o=this.zoomOrigin[1]*this.scale,i=this.scale*e;this.scale<1&&i>1||this.scale>1&&i<1?this.scale=1:this.scale=i,this.scale>this.maxScaleVal?this.scale=this.maxScaleVal:this.scale<this.minScaleVal&&(this.scale=this.minScaleVal);let l=this.zoomOrigin[0]*this.scale,n=this.zoomOrigin[1]*this.scale;this.move(t-l,o-n)},setZoomOrigin(e,t){this.zoomOrigin[0]=(e-this.translate[0])/this.scale,this.zoomOrigin[1]=(t-this.translate[1])/this.scale},fillToParent(){let e=this.ele.parentNode;const t=5,o=5;let i=e.offsetWidth,l=e.offsetHeight,n=this.ele.offsetWidth,a=this.ele.offsetHeight,r=Math.min((l-2*t)/a,(i-2*o)/n);r>1&&(r=1),this.scale=r,n*=r,a*=r;let s=(i-n)/2,d=(l-a)/2;this.setPos(s,d)}};t=Bt.lastId.toString(),Bt.lastId++,Bt[t]=o,e.setAttribute("ImgHandleDataID",t)}return Bt[t]}function Rt(e,t){let o=Math.sqrt(Math.pow(e.pageX-t.pageX,2)+Math.pow(e.pageX-t.pageX,2));return o}function zt(e){e.preventDefault();let t=$t(this);e||window.event;if(t.isMoved=!1,e.touches.length>=2)clearTimeout(t.OneTouchTimer),t.multPointStart=e.touches,t.setZoomOrigin(e.touches[0].pageX+(e.touches[1].pageX-e.touches[0].pageX)/2,e.touches[0].pageY+(e.touches[1].pageY-e.touches[0].pageY)/2),console.log("多点触摸事件");else{let o=Date.now()-t.lastTouchTime;t.lastTouchTime=Date.now(),t.startPosition=[e.touches[0].pageX,e.touches[0].pageY],o>0&&o<=250?(console.log("zoom",e.touches[0]),t.setZoomOrigin(e.touches[0].pageX,e.touches[0].pageY-this.offsetTop),clearTimeout(t.OneTouchTimer),t.isDoubleTouch=!0):(t.OneTouchTimer=setTimeout((function(){console.log("单击事件",t,e),t.onTap&&t.onTap(e)}),350),t.isDoubleTouch=!1)}}function Ft(e){e.preventDefault();let t=$t(this);t.isMoved=!0,clearTimeout(t.OneTouchTimer),e.touches.length>=2?(console.log("e.touches.length >= 2"),At(t,e)):t.isDoubleTouch?jt(t,e):Xt(t,e)}function Et(e){e.preventDefault();let t=$t(this);1==e.touches.length&&(t.startPosition=[e.touches[0].pageX,e.touches[0].pageY]),t.isMoved||t.isDoubleTouch&&Ut(t)}function Ht(e){if("SPAN"==e.target.tagName)return void(Zt=!1);e.preventDefault();let t=$t(this);t.fillToParent(),t.applyTransform()}function Qt(e){e.preventDefault();let t=$t(this);t.setZoomOrigin(e.layerX,e.layerY);const o=e.deltaY>0?.8:1.2;t.zoom(o),t.applyTransform()}function Ot(e){if(1==e.button)return;if("SPAN"==e.target.tagName)return void(Zt=!1);e.preventDefault(),Zt=!0;let t=$t(this);t.startPosition=[e.layerX,e.layerY]}function Nt(e){if(1==e.button){let e=$t(this);return e.fillToParent(),void e.applyTransform()}}function Ut(e){e.fillToParent(),e.applyTransform()}function At(e,t){let o=t.touches,i=Rt(o[0],o[1])/Rt(e.multPointStart[0],e.multPointStart[1]);e.zoom(i),e.multPointStart=t.touches,e.applyTransform()}function jt(e,t){let o=1+(e.startPosition[1]-t.touches[0].pageY)/150;e.zoom(o),e.applyTransform(),e.startPosition=[t.touches[0].pageX,t.touches[0].pageY]}function Xt(e,t){let o=[t.touches[0].pageX,t.touches[0].pageY],i=[o[0]-e.startPosition[0],o[1]-e.startPosition[1]];e.startPosition=o,e.move(i[0],i[1]),e.applyTransform()}function Yt(e){if(!Zt||1!=e.buttons)return;e.preventDefault();let t=$t(this),o=[e.layerX,e.layerY],i=[o[0]-t.startPosition[0],o[1]-t.startPosition[1]];t.startPosition=o,t.move(i[0],i[1]),t.applyTransform()}function Gt(e){let t=e.getAttribute("ImgHandleDataID");t&&delete Bt[t]}function Jt(e){let t=e.getAttribute("ImgHandleDataID");void 0==t?(e.addEventListener("touchstart",zt,!1),e.addEventListener("touchmove",Ft,!1),e.addEventListener("touchend",Et,!1),e.addEventListener("mousewheel",Qt,!1),e.addEventListener("dblclick",Ht,!1),e.addEventListener("mousedown",Ot,!1),e.addEventListener("mouseup",Nt,!1),e.addEventListener("mousemove",Yt,!1),e.style.transformOrigin="0 0"):Gt(e),e.removeAttribute("ImgHandleDataID");let o=$t(e);return o.fillToParent(),o.applyTransform(),o}(0,i.dD)("data-v-b868e8b2");const Kt={class:"PosTextBoxDiv"},eo=["onBlur","onClick"],to=["innerHTML"];function oo(e,t,o,l,n,s){return(0,i.wg)(),(0,i.iD)("div",Kt,[(0,i._)("div",{class:"PosTextBox",style:(0,a.j5)(n.dCSS),ref:"PosTextBox"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.recoItem.detail,(e=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{id:"rotateBox",class:(0,a.C_)(["rotateBox",{rotateBoxSelected:o.showText&&!this.textBgTransparent&&e.selected,"bg-deep-orange-2":o.showText&&!this.textBgTransparent&&!e.selected&&e.text!==e.srctext,"bg-blue-grey-3":o.showText&&!this.textBgTransparent&&!e.selected&&e.text===e.srctext,rotateBoxBorder:o.showBorder&&!e.selected,rotateBoxBorderSelected:o.showBorder&&e.selected}]),onBlur:t=>s.textChange(t,e),onClick:t=>s.textClick(t,e),key:e.rect,style:(0,a.j5)(e.textCss+s.getRotateBoxColorStyle())},[o.showText?((0,i.wg)(),(0,i.iD)("div",{key:0,style:(0,a.j5)(e.textTransform?e.textTransform:""),class:"tramsformOriLT"},[(0,i._)("span",{class:(0,a.C_)({errorTextColor:e.score<n.recThres&&!e.textEdited,editedTextColor:e.textEdited}),innerHTML:s.getDisplayText(e)},null,10,to)],4)):(0,i.kq)("",!0)],46,eo)),[[r.F8,e.score>=n.recThres||n.keepLowScore]]))),128))],4)])}let io,lo;function no(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function ao(e){for(let t=0;t<e.detail.length;t++){const o=e.detail[t];if(o.textCss)return;o.textCss="transform: matrix("+o.trMat[0].toString()+", "+o.trMat[1].toString()+", "+o.trMat[2].toString()+", "+o.trMat[3].toString()+", "+o.trMat[4].toString()+", "+o.trMat[5].toString()+");";const i=no(e.detail[t].rect[0],e.detail[t].rect[1]),l=no(e.detail[t].rect[1],e.detail[t].rect[2]),n=Math.min(i,l),a=Math.max(i,l);e.detail[t].textCss+="width: "+a.toString()+"px;height: "+n.toString()+"px;";const r=ro(e.detail[t].text,n.toString()+"px");let s=n;if(a>r+5){const o=e.detail[t].text.length,i=(a-r)/(o-1);e.detail[t].textCss+="letter-spacing: "+i.toString()+"px;"}else if(a<r){const e=a/r;s=n*e}s<12&&(e.detail[t].textTransform="transform: scale("+(s/12).toString()+");",s=12),e.detail[t].textCss+="font-size: "+s.toString()+"px;"}}function ro(e,t){const o=ro.canvas||(ro.canvas=document.createElement("canvas")),i=o.getContext("2d");i.font=t+" "+lo;const l=i.measureText(e);return l.width}(0,i.Cn)();const so={data(){return{dCSS:"",ctWidth:0,ctHeight:0,errWordHandle:"Normal",recThres:.6,keepLowScore:!1,highlightErrWordThres:.6,textBackground:"#faebd7",textColor:"#000000",textBgTransparent:!1}},props:["recoItem","showBorder","showText"],emits:["onExitFullScreen"],methods:{textClick(e,t){e.stopPropagation(),f.set("SingleTextChoose",t)},getRotateBoxColorStyle(){let e="";return e+="color:"+this.textColor+";",e},textChange(e,t){e.target.innerText!==t.text?t.textEdited=e.target.innerText:t.textEdited="",this.$forceUpdate()},getDisplayText(e){if(e.text!==e.srctext)return e.text;if("Normal"===this.errWordHandle)return e.text;let t,o="",i=!1,l=-1;const n=this.errWordHandle.indexOf("Highlight")>=0?"<font color=red>":"",a=this.errWordHandle.indexOf("Highlight")>=0?"</font>":"";for(let r=0;r<e.wordScore.length;r++){const s=e.wordScore[r];s<io.highlightErrWordThres?(i||(o+=n),i=!0):(i&&(o+=a),l<0&&(l=o.length),t=o.length+1,i=!1),(s>=io.highlightErrWordThres||"Ignore"!==this.errWordHandle)&&(o+=e.text[r])}return i&&(o+=a),this.errWordHandle.indexOf("Ignore")>=0?l<0?"":o.slice(l,t):o},updata(e){if(!this.$refs.PosTextBox)return;const t=this.$refs.PosTextBox.parentNode;this.ctHeight=t.offsetHeight,this.ctWidth=t.offsetWidth;const o=e.imgWidth,i=e.imgHeight;this.dCSS="width: "+o.toString()+"px;height: "+i.toString()+"px;",ao(e)}},created(){io=this,L.Z.addMonitor(["errWordHandle","highlightErrWordThres","recThres","keepLowScore","textBackground","textColor","textBgTransparent"],io),window.onresize=()=>(()=>{io.updata(io.recoItem)})()},mounted:function(){this.updata(this.recoItem),lo=window.getComputedStyle(this.$refs.PosTextBox).fontFamily},watch:{recoItem(e,t){this.updata(e)}}};so.render=oo,so.__scopeId="data-v-b868e8b2";const co=so;(0,i.dD)("data-v-15ce297a");const uo={class:"Toolbar text-light-blue"},mo={class:"text-grey-6 BtnBound iconlabel"},go={key:1,class:"text-red-12 BtnBound iconlabel"};function ho(e,t,o,l,n,r){const s=(0,i.up)("ToolBtn"),d=(0,i.up)("q-separator");return(0,i.wg)(),(0,i.iD)("div",uo,[(0,i._)("div",mo,[(0,i._)("span",null,(0,a.zw)(o.noteText),1)]),(0,i.Wm)(s,{id:"reRecognition",IconName:"o_restart_alt",onClick:r.onRestartClick,label:e.$q.screen.gt.md?e.$t("bar.reRecognition"):""},null,8,["onClick","label"]),(0,i.Wm)(s,{IconName:"o_delete_outline",onClick:r.onDeleteClick,label:""},null,8,["onClick"]),n.selectedItem.detail.langCode!=n.recLangCode?((0,i.wg)(),(0,i.j4)(d,{key:0,vertical:"",inset:"",spaced:""})):(0,i.kq)("",!0),n.selectedItem.detail.langCode!=n.recLangCode?((0,i.wg)(),(0,i.iD)("div",go,[(0,i._)("span",null,(0,a.zw)(e.$t("langname."+n.selectedItem.detail.langCode)),1)])):(0,i.kq)("",!0)])}(0,i.Cn)();const po={components:{ToolBtn:ie},data(){return{selectedItem:{url:"",text:void 0},showBorder:!1,showText:!0,recLangCode:""}},props:{noteText:{default:""}},created(){L.Z.addMonitor(["selectedItem","recLangCode"],this)},methods:{onRestartClick(){Q.reReco()},onDeleteClick(){Q.deleteItem(Q.selectedId)}}};var fo=o(5869);po.render=ho,po.__scopeId="data-v-15ce297a";const xo=po;let wo,vo;oe()(po,"components",{QSeparator:fo.Z});const bo={components:{RotateText:co,ToolBtn:ie,CommonBar:xo},data(){return{selectedItem:{url:"",text:void 0},showBorder:!1,showText:!0,imageScaleVal:"100%"}},created(){L.Z.addMonitor(["selectedItem"],this)},beforeUnmount(){window.onresize=null,Gt(vo.$refs.mainBox),f.rmevent("WindowResize",this.onWindowResize)},mounted(){vo=this,f.addevent("WindowResize",this.onWindowResize,!0)},watch:{selectedItem(e){this.onSelectedChangeCB(e.id)}},methods:{switchViewModel(e){f.set("ViewModel",e)},onWindowResize(){vo.$refs.mainBox&&vo.selectedItem.imgWidth&&(console.log("onWindowResize"),wo.fillToParent(),wo.applyTransform())},onScale(e){this.imageScaleVal=Math.round(100*e).toString()+"%"},onTap(e){const t=vo.$refs.mainBox;let o=e.target;while(o!==t){if("rotateBox"===o.id){o._vei.onClick(e);break}o=o.parentNode}console.log("on tap ",e.target)},onSelectedChangeCB(e){vo.$nextTick((function(){vo.$refs.mainBox&&vo.selectedItem.imgWidth&&(vo.$refs.mainBox.style.width=vo.selectedItem.imgWidth+"px",vo.$refs.mainBox.style.height=vo.selectedItem.imgHeight+"px",wo=Jt(vo.$refs.mainBox),wo.onTap=vo.onTap,vo.onScale(wo.scale),wo.onScale=vo.onScale)}))}}};var Io=o(5862);bo.render=Mt,bo.__scopeId="data-v-75c987ec";const To=bo;oe()(bo,"components",{QInnerLoading:pt.Z,QSpinnerBox:Io.Z}),(0,i.dD)("data-v-40844b04");const yo={key:0,ref:"mainBox",class:"textbox"},Co=["wrap"],ko={key:1,class:"ToolBarPos ToolbarBorder"},So={class:"Toolbar text-light-blue"},_o={class:"text-grey-13"};function Do(e,t,o,l,n,s){const d=(0,i.up)("ToolBtn"),c=(0,i.up)("q-icon"),u=(0,i.up)("q-item-section"),m=(0,i.up)("q-item"),g=(0,i.up)("q-separator"),h=(0,i.up)("q-list"),p=(0,i.up)("q-menu"),f=(0,i.up)("q-space"),x=(0,i.up)("CommonBar"),w=(0,i.up)("q-inner-loading"),v=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[void 0!=n.selectedItem.text?((0,i.wg)(),(0,i.iD)("div",yo,[(0,i.wy)((0,i._)("textarea",{class:"textItem",wrap:n.wordWrap?"":"off","onUpdate:modelValue":t[0]||(t[0]=e=>n.textEdited=e)},null,8,Co),[[r.nr,n.textEdited]])],512)):(0,i.kq)("",!0),void 0!=n.selectedItem.text?((0,i.wg)(),(0,i.iD)("div",ko,[(0,i._)("div",So,[e.$q.screen.gt.sm?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(d,{key:0,IconName:"o_image",label:e.$t("RViewText.Image"),onClick:t[1]||(t[1]=e=>s.switchViewModel("Image"))},null,8,["label"])),(0,i.Wm)(d,{id:"copyText",IconName:"o_content_copy",IconSize:"27px",label:e.$t("RViewText.Copy"),onClick:t[2]||(t[2]=()=>{s.copyText()})},null,8,["label"]),(0,i._)("div",null,[(0,i.Wm)(d,{IconName:"o_menu",IconSize:"27px",label:e.$t("RViewText.layout")},null,8,["label"]),(0,i.Wm)(p,{modelValue:n.showMenu,"onUpdate:modelValue":t[3]||(t[3]=e=>n.showMenu=e)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.MenuItems,(t=>((0,i.wg)(),(0,i.j4)(h,{dense:"",key:t.label},{default:(0,i.w5)((()=>["separator"!=t.label?(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{key:0,clickable:"",onClick:t.func},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{color:t.cond()?"primary":"grey",name:t.icon},null,8,["color","name"])])),_:2},1024),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.$t(t.label)),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[v]]):(0,i.kq)("",!0),"separator"===t.label?((0,i.wg)(),(0,i.j4)(g,{key:1})):(0,i.kq)("",!0)])),_:2},1024)))),128))])),_:1},8,["modelValue"])]),(0,i.Wm)(f)]),e.$q.screen.gt.sm?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(x,{key:0}))])):(0,i.kq)("",!0),(0,i.Wm)(w,{showing:""===n.selectedItem.text},{default:(0,i.w5)((()=>[(0,i._)("h3",_o,(0,a.zw)(e.$t("RViewText.noDetectText")),1)])),_:1},8,["showing"])],64)}(0,i.Cn)();var Wo=o(7939);let Vo;const qo={components:{ToolBtn:ie,CommonBar:xo},data(){return{textEdited:"",selectedItem:{},showMenu:!1,wordWrap:!0,MenuItems:[{label:"textLayoutMenu.CombineLine",func:function(){Vo.setLayoutMode("CombineLine")},icon:"remove",cond:function(){return"CombineLine"===Vo.selectedItem.layoutMode}},{label:"textLayoutMenu.Auto",func:function(){Vo.setLayoutMode("Auto")},icon:"o_hdr_auto",cond:function(){return"Auto"===Vo.selectedItem.layoutMode}},{label:"textLayoutMenu.SplitLine",func:function(){Vo.setLayoutMode("SplitLine")},icon:"o_receipt",cond:function(){return"SplitLine"===Vo.selectedItem.layoutMode}},{label:"separator"},{label:"textLayoutMenu.WordWrap",func:function(){Vo.wordWrap=!Vo.wordWrap},icon:"o_subdirectory_arrow_left",cond:function(){return Vo.wordWrap}}]}},created(){Vo=this,f.addevent("SeclectedRecoStateChanged",Vo.onSeclectedRecoStateChanged),L.Z.addMonitor(["selectedItem"],this)},beforeUnmount(){f.rmevent("SeclectedRecoStateChanged",Vo.onSeclectedRecoStateChanged)},mounted(){this.textEdited=this.selectedItem.text},methods:{onSeclectedRecoStateChanged(){this.textEdited=this.selectedItem.text},switchViewModel(e){f.set("ViewModel",e)},setLayoutMode(e){this.selectedItem.layoutMode=e,Q.refreshItemText(this.selectedItem)},copyText(){if(!Vo.textEdited)return;const e=(0,Wo.Z)(Vo.textEdited);e?this.$q.notify({message:this.$t("message.copySuccess"),color:"blue",timeout:500}):this.$q.notify({message:this.$t("message.copyFailed"),color:"red",timeout:500})}}};qo.render=Do,qo.__scopeId="data-v-40844b04";const Lo=qo;oe()(qo,"components",{QMenu:wt.Z,QList:vt.Z,QItem:bt.Z,QItemSection:It.Z,QIcon:ee.Z,QSeparator:fo.Z,QSpace:De.Z,QInnerLoading:pt.Z}),oe()(qo,"directives",{ClosePopup:Fe.Z});const Po={class:"Toolbar RecLangToolbar text-light-blue"};function Mo(e,t,o,l,n,r){const s=(0,i.up)("ToolBtn"),d=(0,i.up)("q-item-section"),c=(0,i.up)("q-item"),u=(0,i.up)("q-list"),m=(0,i.up)("q-menu"),g=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",Po,[(0,i._)("div",null,[(0,i.Wm)(s,{label:e.$t("identityLanguage:")+" "+e.$t("langname."+n.recLangCode),IconName:"o_subtitles"},null,8,["label"]),(0,i.Wm)(m,{modelValue:n.showLangMenu,"onUpdate:modelValue":t[0]||(t[0]=e=>n.showLangMenu=e)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.langList,(t=>((0,i.wg)(),(0,i.j4)(u,{dense:"",style:{"min-width":"100px"},key:t},{default:(0,i.w5)((()=>[t!=n.recLangCode?(0,i.wy)(((0,i.wg)(),(0,i.j4)(c,{key:0,onClick:e=>r.onRecLangChang(t),clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.$t("langname."+t)),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[g]]):(0,i.kq)("",!0)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])])}const Bo={components:{ToolBtn:ie},data(){return{showLangMenu:!1,langList:q.langList,recLangCode:"zh-CHS"}},created(){L.Z.addMonitor(["recLangCode"],this)},methods:{onRecLangChang(e){F.isBusy?this.$q.notify({message:this.$t("message.waitIdentityFinish"),color:"red",timeout:500}):F.setLang(e)}}};Bo.render=Mo;const Zo=Bo;oe()(Bo,"components",{QMenu:wt.Z,QList:vt.Z,QItem:bt.Z,QItemSection:It.Z}),oe()(Bo,"directives",{ClosePopup:Fe.Z});const $o={components:{RViewImageText:To,RViewText:Lo,RecLangToolbar:Zo},data(){return{splitterModel:60,ViewMode:"Text",selectedItem:{url:"",text:void 0}}},methods:{switchViewModel(e){this.ViewMode!==e&&(this.ViewMode=e)},onMainImageViewClick(){f.trig("MainImageViewClick")}},watch:{splitterModel(e){f.trig("WindowResize")}},created(){L.Z.addMonitor(["selectedItem"],this),f.addevent("ViewModel",this.switchViewModel)}};var Ro=o(9723),zo=o(5096);$o.render=Dt,$o.__scopeId="data-v-ce8f36a6";const Fo=$o;oe()($o,"components",{QSplitter:Ro.Z,QAvatar:zo.Z}),(0,i.dD)("data-v-869eee36");const Eo={style:{height:"10rem"}},Ho={style:{height:"50%"},class:"bg-white imageDiv"},Qo={ref:"mainBox",class:"imagebox"},Oo={ref:"img",ondragstart:"return false;",src:""},No={style:{height:"50%"},class:"bg-white"};function Uo(e,t,o,l,n,s){const d=(0,i.up)("q-btn"),c=(0,i.up)("q-space"),u=(0,i.up)("q-bar"),m=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.j4)(m,{modelValue:n.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>n.dialog=e),"content-class":"mainLayout","full-width":"",seamless:"",position:n.position},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(u,{class:"bg-blue-grey-3"},{default:(0,i.w5)((()=>[(0,i._)("div",null,(0,a.zw)(n.curIndex+1)+"/"+(0,a.zw)(n.itemLength),1),(0,i.Wm)(d,{disable:!(n.curIndex>0),dense:"",flat:"",icon:"o_chevron_left",label:"",onClick:t[0]||(t[0]=e=>s.jumpTo(-1))},null,8,["disable"]),(0,i.Wm)(d,{disable:!(n.curIndex+1<n.itemLength),icon:"o_chevron_right",dense:"",flat:"",label:"",onClick:t[1]||(t[1]=e=>s.jumpTo(1))},null,8,["disable"]),(0,i.Wm)(d,{disable:n.textItem.text==n.textVal,dense:"",flat:"",icon:"o_done",label:e.$t("SingleText.modify"),onClick:s.TextModified},null,8,["disable","label","onClick"]),(0,i.Wm)(d,{disable:n.textItem.text==n.textItem.srctext,dense:"",flat:"",icon:"o_undo",label:e.$t("SingleText.restore"),onClick:s.TextReset},null,8,["disable","label","onClick"]),(0,i.Wm)(d,{dense:"",flat:"",icon:"o_delete",class:"text-red",label:e.$t("SingleText.delete"),onClick:s.TextDelete},null,8,["label","onClick"]),(0,i.Wm)(c),(0,i.Wm)(d,{dense:"",flat:"",icon:"close",onClick:t[2]||(t[2]=e=>n.dialog=!1)})])),_:1}),(0,i._)("div",Eo,[(0,i._)("div",Ho,[(0,i._)("div",Qo,[(0,i._)("img",Oo,null,512)],512)]),(0,i._)("div",No,[(0,i.wy)((0,i._)("textarea",{class:"textbox","onUpdate:modelValue":t[3]||(t[3]=e=>n.textVal=e)},null,512),[[r.nr,n.textVal]])])])])])),_:1},8,["modelValue","position"])}(0,i.Cn)();const Ao={data(){return{dialog:!1,position:"bottom",textVal:"",textItem:{},curIndex:0,itemLength:10,selectedItem:{}}},created(){f.addevent("SingleTextChoose",this.onSingleTextChoose),f.addevent("WindowResize",this.onWindowResize,!0),f.addevent("MainImageViewClick",this.onMainImageViewClick,!0)},beforeUnmount(){f.rmevent("SingleTextChoose",this.onSingleTextChoose),f.rmevent("WindowResize",this.onWindowResize),f.rmevent("MainImageViewClick",this.onMainImageViewClick)},mounted(){},methods:{onMainImageViewClick(){this.textItem.selected=!1,this.dialog=!1},onWindowResize(){this.$refs.mainBox&&Jt(this.$refs.mainBox)},open(e){this.position=e,this.dialog=!0},TextModified(){this.textItem.text=this.textVal,Q.refreshItemText(this.selectedItem)},TextReset(){this.textVal=this.textItem.srctext,this.TextModified()},TextDelete(){this.selectedItem.detail.splice(this.curIndex,1),this.curIndex===this.selectedItem.detail.length&&(this.curIndex-=1),this.curIndex<0?this.dialog=!1:f.set("SingleTextChoose",this.selectedItem.detail[this.curIndex]),Q.refreshItemText(this.selectedItem)},jumpTo(e){f.set("SingleTextChoose",this.selectedItem.detail[this.curIndex+e])},onSingleTextChoose(e){this.selectedItem=Q.getSelectedItem(),this.itemLength=this.selectedItem.detail.length,this.curIndex=this.selectedItem.detail.indexOf(e),this.textItem.selected=!1,this.textItem=e,this.textItem.selected=!0,this.dialog=!0,this.textVal=e.text,this.$nextTick((function(){const e=z(document.getElementById("mainImage"),this.textItem.rect);this.$refs.mainBox.style.width=e.width+"px",this.$refs.mainBox.style.height=e.height+"px",this.$refs.img.src=e.url,Jt(this.$refs.mainBox)}))}}};Ao.render=Uo,Ao.__scopeId="data-v-869eee36";const jo=Ao;function Xo(e,t,o,l,n,r){const s=(0,i.up)("q-circular-progress"),d=(0,i.up)("q-card"),c=(0,i.up)("q-dialog");return n.showDialog?((0,i.wg)(),(0,i.j4)(c,{key:0,modelValue:n.showDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>n.showDialog=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"mainCard",style:{width:"300px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{"show-value":"",value:n.progressVal,size:"150px",color:"light-blue",class:"q-ma-md"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(n.progressVal)+"%",1)])),_:1},8,["value"]),(0,i._)("h5",null,(0,a.zw)(e.$t("common.loading")+" "+e.$t("langname."+n.langname)),1)])),_:1})])),_:1},8,["modelValue"])):(0,i.kq)("",!0)}let Yo;oe()(Ao,"components",{QDialog:Ce.Z,QBar:_e.Z,QBtn:We.Z,QSpace:De.Z});const Go={data(){return{showDialog:!0,progressVal:0,langname:"zh-CHS"}},mounted(){Yo=this,F.onprogress=function(e,t){Yo.progressVal=Math.round(e/t*100)},F.onSetLangFinish=function(){f.set("AntOcrInited",!0),L.Z.set("recLangCode",F.langCode),L.Z.save(),Yo.showDialog=!1,Yo.progressVal=0},F.onSetLangBegin=function(e){Yo.showDialog=!0,Yo.progressVal=0,Yo.langname=e},F.setLang(L.Z.get("recLangCode"))}};Go.render=Xo,Go.__scopeId="data-v-4ae64b02";const Jo=Go;oe()(Go,"components",{QDialog:Ce.Z,QCard:$e.Z,QCircularProgress:ft.Z});const Ko=(0,i.aZ)({name:"PageIndex",components:{ImageList:Tt,UploadImage:St,MainResultView:Fo,SingleTextView:jo,RecLanguageLoader:Jo},methods:{onResize(){f.trig("WindowResize")}}});var ei=o(5151);Ko.render=n;const ti=Ko;oe()(Ko,"components",{QPage:Pe.Z,QResizeObserver:ei.Z});const oi=(0,i.aZ)({name:"PageIndex",components:{Index:ti},data(){return{}}});oi.render=l;const ii=oi}}]);