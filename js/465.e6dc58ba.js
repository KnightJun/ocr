(self["webpackChunkpearocr"]=self["webpackChunkpearocr"]||[]).push([[465],{2353:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(71);var r={_data:{},_changeCallBack:{}},o={version:2,errWordHandle:"Normal",highlightErrWordThres:.6,recThres:.6,unclipRadio:1.6,keepLowScore:!1,textBackground:"#faebd7",textColor:"#000000",textBgTransparent:!1,recLangCode:"zh-CHS",sortingType:"byFileName",uiLangCode:"zh-CHS"};function a(e,t,n){"object"==typeof e?e[t]=n:"function"==typeof e&&e(n)}r.reset=()=>{r.setFromDict(o,!0),r.save()},r.save=()=>{let e={};for(const n in r._data)void 0!=o[n]&&(e[n]=r._data[n]);let t=JSON.stringify(e);localStorage.setItem("PearOcrConfig",t)},r.load=()=>{let e=localStorage.getItem("PearOcrConfig");if(e){if(r._data=JSON.parse(e),!r._data["version"]||r._data["version"]!=o.version)return console.log("unmatch version, cur:",o.version," store version:",r._data["version"]),void r.reset();for(const e in o)void 0==r._data[e]&&r.set(e,o[e])}else r.reset()},r.get=e=>r._data[e],r.set=(e,t)=>{let n=t;while("object"===typeof n&&"value"in n)n=n.value;if(r._changeCallBack[e]&&r._data[e]!=n)for(const o of r._changeCallBack[e])a(o,e,n);r._data[e]=n},r.setFromDict=(e,t=!1)=>{for(const n in e)(t||n in r._data)&&r.set(n,e[n])},r.getToDict=(e,t=!1)=>{for(const n in e){let o=r.get(n);if(void 0!=o){if(!t&&!(n in e))continue;"object"===typeof e[n]&&"value"in e[n]?e[n].value=o:e[n]=o}}},r.addMonitor=(e,t)=>{if("object"!=typeof e)void 0==r._changeCallBack[e]&&(r._changeCallBack[e]=[]),r._changeCallBack[e].push(t),r._data[e]&&a(t,e,r._data[e]);else for(const n of e)r.addMonitor(n,t)},r.load();const i=r},2673:(e,t,n)=>{"use strict";n.d(t,{Z:()=>lr});n(979),n(6105),n(2396),n(7280),n(5363),n(71),n(5860),n(7503),n(8455),n(541),n(9743),n(1118),n(323),n(246),n(6101),n(8009),n(4303);const r=n.p+"2cd7d26356c310de13de79467e21e063.wasm";var o="/";e=n.hmd(e);let a=r.substring(r.lastIndexOf("/")+1);var i,l="undefined"!==typeof l?l:{},s={};for(i in l)l.hasOwnProperty(i)&&(s[i]=l[i]);var u,c,d,f,m,p=[],h="./this.program",g=function(e,t){throw t},v="object"===typeof window,w="function"===typeof importScripts,y="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,x="";function b(e){return l["locateFile"]?l["locateFile"](e,x):x+e}y?(x=w?n(8660).dirname(x)+"/":o+"/",u=function(e,t){return f||(f=n(7602)),m||(m=n(8660)),e=m["normalize"](e),f["readFileSync"](e,t?null:"utf8")},d=function(e){var t=u(e,!0);return t.buffer||(t=new Uint8Array(t)),R(t.buffer),t},c=function(e,t,r){f||(f=n(7602)),m||(m=n(8660)),e=m["normalize"](e),f["readFile"](e,(function(e,n){e?r(e):t(n.buffer)}))},process["argv"].length>1&&(h=process["argv"][1].replace(/\\/g,"/")),p=process["argv"].slice(2),e["exports"]=l,process["on"]("uncaughtException",(function(e){if(!(e instanceof or))throw e})),process["on"]("unhandledRejection",De),g=function(e,t){if(me())throw process["exitCode"]=e,t;process["exit"](e)},l["inspect"]=function(){return"[Emscripten Module object]"}):(v||w)&&(w?x=self.location.href:"undefined"!==typeof document&&document.currentScript&&(x=document.currentScript.src),x=0!==x.indexOf("blob:")?x.substr(0,x.lastIndexOf("/")+1):"",u=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},w&&(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),c=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var T=l["print"]||console.log.bind(console),C=l["printErr"]||console.warn.bind(console);for(i in s)s.hasOwnProperty(i)&&(l[i]=s[i]);function I(e,t){if("function"===typeof WebAssembly.Function){for(var n={i:"i32",j:"i64",f:"f32",d:"f64"},r={parameters:[],results:"v"==t[0]?[]:[n[t[0]]]},o=1;o<t.length;++o)r.parameters.push(n[t[o]]);return new WebAssembly.Function(r,e)}var a=[1,0,1,96],i=t.slice(0,1),l=t.slice(1),s={i:127,j:126,f:125,d:124};a.push(l.length);for(o=0;o<l.length;++o)a.push(s[l[o]]);"v"==i?a.push(0):a=a.concat([1,s[i]]),a[1]=a.length-2;var u=new Uint8Array([0,97,115,109,1,0,0,0].concat(a,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),c=new WebAssembly.Module(u),d=new WebAssembly.Instance(c,{e:{f:e}}),f=d.exports["f"];return f}s=null,l["arguments"]&&(p=l["arguments"]),l["thisProgram"]&&(h=l["thisProgram"]),l["quit"]&&(g=l["quit"]);var _,D=[];function S(){if(D.length)return D.pop();try{se.grow(1)}catch(C){if(!(C instanceof RangeError))throw C;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return se.length-1}function P(e,t){if(!_){_=new WeakMap;for(var n=0;n<se.length;n++){var r=se.get(n);r&&_.set(r,n)}}if(_.has(e))return _.get(e);var o=S();try{se.set(o,e)}catch(C){if(!(C instanceof TypeError))throw C;var a=I(e,t);se.set(o,a)}return _.set(e,o),o}function k(e,t){return P(e,t)}var W,$=function(e){e};l["wasmBinary"]&&(W=l["wasmBinary"]);var V,F=l["noExitRuntime"]||!0;"object"!==typeof WebAssembly&&De("no native wasm support detected");var A=!1;function R(e,t){e||De("Assertion failed: "+t)}var q="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function E(e,t,n){var r=t+n,o=t;while(e[o]&&!(o>=r))++o;if(o-t>16&&e.subarray&&q)return q.decode(e.subarray(t,o));var a="";while(t<o){var i=e[t++];if(128&i){var l=63&e[t++];if(192!=(224&i)){var s=63&e[t++];if(i=224==(240&i)?(15&i)<<12|l<<6|s:(7&i)<<18|l<<12|s<<6|63&e[t++],i<65536)a+=String.fromCharCode(i);else{var u=i-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&i)<<6|l)}else a+=String.fromCharCode(i)}return a}function B(e,t){return e?E(Z,e,t):""}function M(e,t,n,r){if(!(r>0))return 0;for(var o=n,a=n+r-1,i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l>=55296&&l<=57343){var s=e.charCodeAt(++i);l=65536+((1023&l)<<10)|1023&s}if(l<=127){if(n>=a)break;t[n++]=l}else if(l<=2047){if(n+1>=a)break;t[n++]=192|l>>6,t[n++]=128|63&l}else if(l<=65535){if(n+2>=a)break;t[n++]=224|l>>12,t[n++]=128|l>>6&63,t[n++]=128|63&l}else{if(n+3>=a)break;t[n++]=240|l>>18,t[n++]=128|l>>12&63,t[n++]=128|l>>6&63,t[n++]=128|63&l}}return t[n]=0,n-o}function O(e,t,n){return M(e,Z,t,n)}function L(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}var z,H,Z,U,j,Q,N,Y,X,G="undefined"!==typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function J(e,t){var n=e,r=n>>1,o=r+t/2;while(!(r>=o)&&j[r])++r;if(n=r<<1,n-e>32&&G)return G.decode(Z.subarray(e,n));for(var a="",i=0;!(i>=t/2);++i){var l=U[e+2*i>>1];if(0==l)break;a+=String.fromCharCode(l)}return a}function K(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;n-=2;for(var r=t,o=n<2*e.length?n/2:e.length,a=0;a<o;++a){var i=e.charCodeAt(a);U[t>>1]=i,t+=2}return U[t>>1]=0,t-r}function ee(e){return 2*e.length}function te(e,t){var n=0,r="";while(!(n>=t/4)){var o=Q[e+4*n>>2];if(0==o)break;if(++n,o>=65536){var a=o-65536;r+=String.fromCharCode(55296|a>>10,56320|1023&a)}else r+=String.fromCharCode(o)}return r}function ne(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,o=r+n-4,a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i>=55296&&i<=57343){var l=e.charCodeAt(++a);i=65536+((1023&i)<<10)|1023&l}if(Q[t>>2]=i,t+=4,t+4>o)break}return Q[t>>2]=0,t-r}function re(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function oe(e,t){H.set(e,t)}function ae(e,t,n){for(var r=0;r<e.length;++r)H[t++>>0]=e.charCodeAt(r);n||(H[t>>0]=0)}function ie(e,t){return e%t>0&&(e+=t-e%t),e}function le(e){z=e,l["HEAP8"]=H=new Int8Array(e),l["HEAP16"]=U=new Int16Array(e),l["HEAP32"]=Q=new Int32Array(e),l["HEAPU8"]=Z=new Uint8Array(e),l["HEAPU16"]=j=new Uint16Array(e),l["HEAPU32"]=N=new Uint32Array(e),l["HEAPF32"]=Y=new Float32Array(e),l["HEAPF64"]=X=new Float64Array(e)}l["INITIAL_MEMORY"];var se,ue=[],ce=[],de=[],fe=0;function me(){return F||fe>0}function pe(){if(l["preRun"]){"function"==typeof l["preRun"]&&(l["preRun"]=[l["preRun"]]);while(l["preRun"].length)we(l["preRun"].shift())}Ae(ue)}function he(){!0,Ae(ce)}function ge(){!0}function ve(){if(l["postRun"]){"function"==typeof l["postRun"]&&(l["postRun"]=[l["postRun"]]);while(l["postRun"].length)xe(l["postRun"].shift())}Ae(de)}function we(e){ue.unshift(e)}function ye(e){ce.unshift(e)}function xe(e){de.unshift(e)}var be=0,Te=null,Ce=null;function Ie(e){be++,l["monitorRunDependencies"]&&l["monitorRunDependencies"](be)}function _e(e){if(be--,l["monitorRunDependencies"]&&l["monitorRunDependencies"](be),0==be&&(null!==Te&&(clearInterval(Te),Te=null),Ce)){var t=Ce;Ce=null,t()}}function De(e){l["onAbort"]&&l["onAbort"](e),e+="",C(e),A=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw t}l["preloadedImages"]={},l["preloadedAudios"]={};var Se,Pe="data:application/octet-stream;base64,";function ke(e){return e.startsWith(Pe)}function We(e){return e.startsWith("file://")}function $e(e){try{if(e==Se&&W)return new Uint8Array(W);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(C){De(C)}}function Ve(){if(!W&&(v||w)){if("function"===typeof fetch&&!We(Se))return fetch(Se,{credentials:"same-origin"}).then((function(e){if(!e["ok"])throw"failed to load wasm binary file at '"+Se+"'";return e["arrayBuffer"]()})).catch((function(){return $e(Se)}));if(c)return new Promise((function(e,t){c(Se,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return $e(Se)}))}function Fe(){var e={a:er};function t(e,t){var n=e.exports;l["asm"]=n,V=l["asm"]["E"],le(V.buffer),se=l["asm"]["L"],ye(l["asm"]["F"]),_e("wasm-instantiate")}function n(e){t(e["instance"])}function r(t){return Ve().then((function(t){var n=WebAssembly.instantiate(t,e);return n})).then(t,(function(e){C("failed to asynchronously prepare wasm: "+e),De(e)}))}function o(){return W||"function"!==typeof WebAssembly.instantiateStreaming||ke(Se)||We(Se)||"function"!==typeof fetch?r(n):fetch(Se,{credentials:"same-origin"}).then((function(t){var o=WebAssembly.instantiateStreaming(t,e);return o.then(n,(function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),r(n)}))}))}if(Ie("wasm-instantiate"),l["instantiateWasm"])try{var a=l["instantiateWasm"](e,t);return a}catch(i){return C("Module.instantiateWasm callback failed with error: "+i),!1}return o(),{}}function Ae(e){while(e.length>0){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?se.get(n)():se.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(l)}}function Re(e,t,n,r){De("Assertion failed: "+B(e)+", at: "+[t?B(t):"unknown filename",n,r?B(r):"unknown function"])}function qe(e){return tr(e+16)+16}function Ee(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){Q[this.ptr+4>>2]=e},this.get_type=function(){return Q[this.ptr+4>>2]},this.set_destructor=function(e){Q[this.ptr+8>>2]=e},this.get_destructor=function(){return Q[this.ptr+8>>2]},this.set_refcount=function(e){Q[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,H[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=H[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,H[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=H[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=Q[this.ptr>>2];Q[this.ptr>>2]=e+1},this.release_ref=function(){var e=Q[this.ptr>>2];return Q[this.ptr>>2]=e-1,1===e}}Se=a,ke(Se)||(Se=b(Se));function Be(e,t,n){var r=new Ee(e);throw r.init(t,n),e,e}var Me={};function Oe(e){while(e.length){var t=e.pop(),n=e.pop();n(t)}}function Le(e){return this["fromWireType"](N[e>>2])}var ze={},He={},Ze={},Ue=48,je=57;function Qe(e){if(void 0===e)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Ue&&t<=je?"_"+e:e}function Ne(e,t){return e=Qe(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Ye(e,t){var n=Ne(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Xe=void 0;function Ge(e){throw new Xe(e)}function Je(e,t,n){function r(t){var r=n(t);r.length!==e.length&&Ge("Mismatched type converter count");for(var o=0;o<e.length;++o)lt(e[o],r[o])}e.forEach((function(e){Ze[e]=t}));var o=new Array(t.length),a=[],i=0;t.forEach((function(e,t){He.hasOwnProperty(e)?o[t]=He[e]:(a.push(e),ze.hasOwnProperty(e)||(ze[e]=[]),ze[e].push((function(){o[t]=He[e],++i,i===a.length&&r(o)})))})),0===a.length&&r(o)}function Ke(e){var t=Me[e];delete Me[e];var n=t.rawConstructor,r=t.rawDestructor,o=t.fields,a=o.map((function(e){return e.getterReturnType})).concat(o.map((function(e){return e.setterArgumentType})));Je([e],a,(function(e){var a={};return o.forEach((function(t,n){var r=t.fieldName,i=e[n],l=t.getter,s=t.getterContext,u=e[n+o.length],c=t.setter,d=t.setterContext;a[r]={read:function(e){return i["fromWireType"](l(s,e))},write:function(e,t){var n=[];c(d,e,u["toWireType"](n,t)),Oe(n)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var n in a)t[n]=a[n].read(e);return r(e),t},toWireType:function(e,t){for(var o in a)if(!(o in t))throw new TypeError('Missing field:  "'+o+'"');var i=n();for(o in a)a[o].write(i,t[o]);return null!==e&&e.push(r,i),i},argPackAdvance:8,readValueFromPointer:Le,destructorFunction:r}]}))}function et(e,t,n,r,o){}function tt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function nt(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);rt=e}var rt=void 0;function ot(e){var t="",n=e;while(Z[n])t+=rt[Z[n++]];return t}var at=void 0;function it(e){throw new at(e)}function lt(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||it('type "'+r+'" must have a positive integer typeid pointer'),He.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;it("Cannot register type '"+r+"' twice")}if(He[e]=t,delete Ze[e],ze.hasOwnProperty(e)){var o=ze[e];delete ze[e],o.forEach((function(e){e()}))}}function st(e,t,n,r,o){var a=tt(n);t=ot(t),lt(e,{name:t,fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:o},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=H;else if(2===n)r=U;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=Q}return this["fromWireType"](r[e>>a])},destructorFunction:null})}function ut(e){if(!(this instanceof _t))return!1;if(!(e instanceof _t))return!1;var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,o=e.$$.ptr;while(t.baseClass)n=t.upcast(n),t=t.baseClass;while(r.baseClass)o=r.upcast(o),r=r.baseClass;return t===r&&n===o}function ct(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function dt(e){function t(e){return e.$$.ptrType.registeredClass.name}it(t(e)+" instance already deleted")}var ft=!1;function mt(e){}function pt(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function ht(e){e.count.value-=1;var t=0===e.count.value;t&&pt(e)}function gt(e){return"undefined"===typeof FinalizationGroup?(gt=function(e){return e},e):(ft=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?ht(n):console.warn("object already deleted: "+n.ptr)}})),gt=function(e){return ft.register(e,e.$$,e.$$),e},mt=function(e){ft.unregister(e.$$)},gt(e))}function vt(){if(this.$$.ptr||dt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=gt(Object.create(Object.getPrototypeOf(this),{$$:{value:ct(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function wt(){this.$$.ptr||dt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&it("Object already scheduled for deletion"),mt(this),ht(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function yt(){return!this.$$.ptr}var xt=void 0,bt=[];function Tt(){while(bt.length){var e=bt.pop();e.$$.deleteScheduled=!1,e["delete"]()}}function Ct(){return this.$$.ptr||dt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&it("Object already scheduled for deletion"),bt.push(this),1===bt.length&&xt&&xt(Tt),this.$$.deleteScheduled=!0,this}function It(){_t.prototype["isAliasOf"]=ut,_t.prototype["clone"]=vt,_t.prototype["delete"]=wt,_t.prototype["isDeleted"]=yt,_t.prototype["deleteLater"]=Ct}function _t(){}var Dt={};function St(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||it("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function Pt(e,t,n){l.hasOwnProperty(e)?((void 0===n||void 0!==l[e].overloadTable&&void 0!==l[e].overloadTable[n])&&it("Cannot register public name '"+e+"' twice"),St(l,e,e),l.hasOwnProperty(n)&&it("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),l[e].overloadTable[n]=t):(l[e]=t,void 0!==n&&(l[e].numArguments=n))}function kt(e,t,n,r,o,a,i,l){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=o,this.getActualType=a,this.upcast=i,this.downcast=l,this.pureVirtualFunctions=[]}function Wt(e,t,n){while(t!==n)t.upcast||it("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function $t(e,t){if(null===t)return this.isReference&&it("null is not a valid "+this.name),0;t.$$||it('Cannot pass "'+wn(t)+'" as a '+this.name),t.$$.ptr||it("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass,r=Wt(t.$$.ptr,n,this.registeredClass);return r}function Vt(e,t){var n;if(null===t)return this.isReference&&it("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||it('Cannot pass "'+wn(t)+'" as a '+this.name),t.$$.ptr||it("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&it("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=Wt(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&it("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:it("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var o=t["clone"]();n=this.rawShare(n,gn((function(){o["delete"]()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:it("Unsupporting sharing policy")}return n}function Ft(e,t){if(null===t)return this.isReference&&it("null is not a valid "+this.name),0;t.$$||it('Cannot pass "'+wn(t)+'" as a '+this.name),t.$$.ptr||it("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&it("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass,r=Wt(t.$$.ptr,n,this.registeredClass);return r}function At(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Rt(e){this.rawDestructor&&this.rawDestructor(e)}function qt(e){null!==e&&e["delete"]()}function Et(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=Et(e,t,n.baseClass);return null===r?null:n.downcast(r)}function Bt(){return Object.keys(zt).length}function Mt(){var e=[];for(var t in zt)zt.hasOwnProperty(t)&&e.push(zt[t]);return e}function Ot(e){xt=e,bt.length&&xt&&xt(Tt)}function Lt(){l["getInheritedInstanceCount"]=Bt,l["getLiveInheritedInstances"]=Mt,l["flushPendingDeletes"]=Tt,l["setDelayFunction"]=Ot}var zt={};function Ht(e,t){void 0===t&&it("ptr should not be undefined");while(e.baseClass)t=e.upcast(t),e=e.baseClass;return t}function Zt(e,t){return t=Ht(e,t),zt[t]}function Ut(e,t){t.ptrType&&t.ptr||Ge("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,r=!!t.smartPtr;return n!==r&&Ge("Both smartPtrType and smartPtr must be specified"),t.count={value:1},gt(Object.create(e,{$$:{value:t}}))}function jt(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Zt(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n["clone"]();var r=n["clone"]();return this.destructor(e),r}function o(){return this.isSmartPointer?Ut(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Ut(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a,i=this.registeredClass.getActualType(t),l=Dt[i];if(!l)return o.call(this);a=this.isConst?l.constPointerType:l.pointerType;var s=Et(t,this.registeredClass,a.registeredClass);return null===s?o.call(this):this.isSmartPointer?Ut(a.registeredClass.instancePrototype,{ptrType:a,ptr:s,smartPtrType:this,smartPtr:e}):Ut(a.registeredClass.instancePrototype,{ptrType:a,ptr:s})}function Qt(){Nt.prototype.getPointee=At,Nt.prototype.destructor=Rt,Nt.prototype["argPackAdvance"]=8,Nt.prototype["readValueFromPointer"]=Le,Nt.prototype["deleteObject"]=qt,Nt.prototype["fromWireType"]=jt}function Nt(e,t,n,r,o,a,i,l,s,u,c){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=o,this.pointeeType=a,this.sharingPolicy=i,this.rawGetPointee=l,this.rawConstructor=s,this.rawShare=u,this.rawDestructor=c,o||void 0!==t.baseClass?this["toWireType"]=Vt:r?(this["toWireType"]=$t,this.destructorFunction=null):(this["toWireType"]=Ft,this.destructorFunction=null)}function Yt(e,t,n){l.hasOwnProperty(e)||Ge("Replacing nonexistant public symbol"),void 0!==l[e].overloadTable&&void 0!==n?l[e].overloadTable[n]=t:(l[e]=t,l[e].argCount=n)}function Xt(e,t,n){var r=l["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}function Gt(e,t,n){return e.includes("j")?Xt(e,t,n):se.get(t).apply(null,n)}function Jt(e,t){var n=[];return function(){n.length=arguments.length;for(var r=0;r<arguments.length;r++)n[r]=arguments[r];return Gt(e,t,n)}}function Kt(e,t){function n(){return e.includes("j")?Jt(e,t):se.get(t)}e=ot(e);var r=n();return"function"!==typeof r&&it("unknown function pointer with signature "+e+": "+t),r}var en=void 0;function tn(e){var t=rr(e),n=ot(t);return nr(t),n}function nn(e,t){var n=[],r={};function o(e){r[e]||He[e]||(Ze[e]?Ze[e].forEach(o):(n.push(e),r[e]=!0))}throw t.forEach(o),new en(e+": "+n.map(tn).join([", "]))}function rn(e,t,n,r,o,a,i,l,s,u,c,d,f){c=ot(c),a=Kt(o,a),l&&(l=Kt(i,l)),u&&(u=Kt(s,u)),f=Kt(d,f);var m=Qe(c);Pt(m,(function(){nn("Cannot construct "+c+" due to unbound types",[r])})),Je([e,t,n],r?[r]:[],(function(t){var n,o;t=t[0],r?(n=t.registeredClass,o=n.instancePrototype):o=_t.prototype;var i=Ne(m,(function(){if(Object.getPrototypeOf(this)!==s)throw new at("Use 'new' to construct "+c);if(void 0===d.constructor_body)throw new at(c+" has no accessible constructor");var e=d.constructor_body[arguments.length];if(void 0===e)throw new at("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(d.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),s=Object.create(o,{constructor:{value:i}});i.prototype=s;var d=new kt(c,i,s,f,n,a,l,u),p=new Nt(c,d,!0,!1,!1),h=new Nt(c+"*",d,!1,!1,!1),g=new Nt(c+" const*",d,!1,!0,!1);return Dt[e]={pointerType:h,constPointerType:g},Yt(m,i),[p,h,g]}))}function on(e,t){for(var n=[],r=0;r<e;r++)n.push(Q[(t>>2)+r]);return n}function an(e,t,n,r,o,a){R(t>0);var i=on(t,n);o=Kt(r,o);var l=[a],s=[];Je([],[e],(function(e){e=e[0];var n="constructor "+e.name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new at("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){nn("Cannot construct "+e.name+" due to unbound types",i)},Je([],i,(function(r){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&it(n+" called with "+arguments.length+" arguments, expected "+(t-1)),s.length=0,l.length=t;for(var e=1;e<t;++e)l[e]=r[e]["toWireType"](s,arguments[e-1]);var a=o.apply(null,l);return Oe(s),r[0]["fromWireType"](a)},[]})),[]}))}function ln(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=Ne(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return o instanceof Object?o:r}function sn(e,t,n,r,o){var a=t.length;a<2&&it("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var i=null!==t[1]&&null!==n,l=!1,s=1;s<t.length;++s)if(null!==t[s]&&void 0===t[s].destructorFunction){l=!0;break}var u="void"!==t[0].name,c="",d="";for(s=0;s<a-2;++s)c+=(0!==s?", ":"")+"arg"+s,d+=(0!==s?", ":"")+"arg"+s+"Wired";var f="return function "+Qe(e)+"("+c+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n";l&&(f+="var destructors = [];\n");var m=l?"destructors":"null",p=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],h=[it,r,o,Oe,t[0],t[1]];i&&(f+="var thisWired = classParam.toWireType("+m+", this);\n");for(s=0;s<a-2;++s)f+="var arg"+s+"Wired = argType"+s+".toWireType("+m+", arg"+s+"); // "+t[s+2].name+"\n",p.push("argType"+s),h.push(t[s+2]);if(i&&(d="thisWired"+(d.length>0?", ":"")+d),f+=(u?"var rv = ":"")+"invoker(fn"+(d.length>0?", ":"")+d+");\n",l)f+="runDestructors(destructors);\n";else for(s=i?1:2;s<t.length;++s){var g=1===s?"thisWired":"arg"+(s-2)+"Wired";null!==t[s].destructorFunction&&(f+=g+"_dtor("+g+"); // "+t[s].name+"\n",p.push(g+"_dtor"),h.push(t[s].destructorFunction))}u&&(f+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),f+="}\n",p.push(f);var v=ln(Function,p).apply(null,h);return v}function un(e,t,n,r,o,a,i,l){var s=on(n,r);t=ot(t),a=Kt(o,a),Je([],[e],(function(e){e=e[0];var r=e.name+"."+t;function o(){nn("Cannot call "+r+" due to unbound types",s)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),l&&e.registeredClass.pureVirtualFunctions.push(t);var u=e.registeredClass.instancePrototype,c=u[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===n-2?(o.argCount=n-2,o.className=e.name,u[t]=o):(St(u,t,r),u[t].overloadTable[n-2]=o),Je([],s,(function(o){var l=sn(r,o,e,a,i);return void 0===u[t].overloadTable?(l.argCount=n-2,u[t]=l):u[t].overloadTable[n-2]=l,[]})),[]}))}var cn=[],dn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function fn(e){e>4&&0===--dn[e].refcount&&(dn[e]=void 0,cn.push(e))}function mn(){for(var e=0,t=5;t<dn.length;++t)void 0!==dn[t]&&++e;return e}function pn(){for(var e=5;e<dn.length;++e)if(void 0!==dn[e])return dn[e];return null}function hn(){l["count_emval_handles"]=mn,l["get_first_emval"]=pn}function gn(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=cn.length?cn.pop():dn.length;return dn[t]={refcount:1,value:e},t}}function vn(e,t){t=ot(t),lt(e,{name:t,fromWireType:function(e){var t=dn[e].value;return fn(e),t},toWireType:function(e,t){return gn(t)},argPackAdvance:8,readValueFromPointer:Le,destructorFunction:null})}function wn(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function yn(e,t){switch(t){case 2:return function(e){return this["fromWireType"](Y[e>>2])};case 3:return function(e){return this["fromWireType"](X[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function xn(e,t,n){var r=tt(n);t=ot(t),lt(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+wn(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:yn(t,r),destructorFunction:null})}function bn(e,t,n){switch(t){case 0:return n?function(e){return H[e]}:function(e){return Z[e]};case 1:return n?function(e){return U[e>>1]}:function(e){return j[e>>1]};case 2:return n?function(e){return Q[e>>2]}:function(e){return N[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Tn(e,t,n,r,o){t=ot(t),-1===o&&(o=4294967295);var a=tt(n),i=function(e){return e};if(0===r){var l=32-8*n;i=function(e){return e<<l>>>l}}var s=t.includes("unsigned");lt(e,{name:t,fromWireType:i,toWireType:function(e,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+wn(n)+'" to '+this.name);if(n<r||n>o)throw new TypeError('Passing a number "'+wn(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+o+"]!");return s?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:bn(t,a,0!==r),destructorFunction:null})}function Cn(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],o=r[t];function a(e){e>>=2;var t=N,n=t[e],r=t[e+1];return new o(z,r,n)}n=ot(n),lt(e,{name:n,fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})}function In(e,t){t=ot(t);var n="std::string"===t;lt(e,{name:t,fromWireType:function(e){var t,r=N[e>>2];if(n)for(var o=e+4,a=0;a<=r;++a){var i=e+4+a;if(a==r||0==Z[i]){var l=i-o,s=B(o,l);void 0===t?t=s:(t+=String.fromCharCode(0),t+=s),o=i+1}}else{var u=new Array(r);for(a=0;a<r;++a)u[a]=String.fromCharCode(Z[e+4+a]);t=u.join("")}return nr(e),t},toWireType:function(e,t){var r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var o="string"===typeof t;o||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||it("Cannot pass non-string to std::string"),r=n&&o?function(){return L(t)}:function(){return t.length};var a=r(),i=tr(4+a+1);if(N[i>>2]=a,n&&o)O(t,i+4,a+1);else if(o)for(var l=0;l<a;++l){var s=t.charCodeAt(l);s>255&&(nr(i),it("String has UTF-16 code units that do not fit in 8 bits")),Z[i+4+l]=s}else for(l=0;l<a;++l)Z[i+4+l]=t[l];return null!==e&&e.push(nr,i),i},argPackAdvance:8,readValueFromPointer:Le,destructorFunction:function(e){nr(e)}})}function _n(e,t,n){var r,o,a,i,l;n=ot(n),2===t?(r=J,o=K,i=ee,a=function(){return j},l=1):4===t&&(r=te,o=ne,i=re,a=function(){return N},l=2),lt(e,{name:n,fromWireType:function(e){for(var n,o=N[e>>2],i=a(),s=e+4,u=0;u<=o;++u){var c=e+4+u*t;if(u==o||0==i[c>>l]){var d=c-s,f=r(s,d);void 0===n?n=f:(n+=String.fromCharCode(0),n+=f),s=c+t}}return nr(e),n},toWireType:function(e,r){"string"!==typeof r&&it("Cannot pass non-string to C++ string type "+n);var a=i(r),s=tr(4+a+t);return N[s>>2]=a>>l,o(r,s+4,a+t),null!==e&&e.push(nr,s),s},argPackAdvance:8,readValueFromPointer:Le,destructorFunction:function(e){nr(e)}})}function Dn(e,t,n,r,o,a){Me[e]={name:ot(t),rawConstructor:Kt(n,r),rawDestructor:Kt(o,a),fields:[]}}function Sn(e,t,n,r,o,a,i,l,s,u){Me[e].fields.push({fieldName:ot(t),getterReturnType:n,getter:Kt(r,o),getterContext:a,setterArgumentType:i,setter:Kt(l,s),setterContext:u})}function Pn(e,t){t=ot(t),lt(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function kn(e){e>4&&(dn[e].refcount+=1)}function Wn(e,t){var n=He[e];return void 0===n&&it(t+" has unknown type "+tn(e)),n}function $n(e,t){e=Wn(e,"_emval_take_value");var n=e["readValueFromPointer"](t);return gn(n)}function Vn(){De()}function Fn(e,t,n){Z.copyWithin(e,t,t+n)}function An(e){try{return V.grow(e-z.byteLength+65535>>>16),le(V.buffer),1}catch(t){}}function Rn(e){var t=Z.length;e>>>=0;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var a=Math.min(n,ie(Math.max(e,o),65536)),i=An(a);if(i)return!0}return!1}var qn={};function En(){return h||"./this.program"}function Bn(){if(!Bn.strings){var e=("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:En()};for(var n in qn)void 0===qn[n]?delete t[n]:t[n]=qn[n];var r=[];for(var n in t)r.push(n+"="+t[n]);Bn.strings=r}return Bn.strings}var Mn={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Mn.buffers[e];0===t||10===t?((1===e?T:C)(E(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){Mn.varargs+=4;var e=Q[Mn.varargs-4>>2];return e},getStr:function(e){var t=B(e);return t},get64:function(e,t){return e}};function On(e,t){var n=0;return Bn().forEach((function(r,o){var a=t+n;Q[e+4*o>>2]=a,ae(r,a),n+=r.length+1})),0}function Ln(e,t){var n=Bn();Q[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),Q[t>>2]=r,0}function zn(e){ir(e)}function Hn(e,t,n,r){for(var o=0,a=0;a<n;a++){for(var i=Q[t+8*a>>2],l=Q[t+(8*a+4)>>2],s=0;s<l;s++)Mn.printChar(e,Z[i+s]);o+=l}return Q[r>>2]=o,0}function Zn(e){$(e)}function Un(e){return e%4===0&&(e%100!==0||e%400===0)}function jn(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var Qn=[31,29,31,30,31,30,31,31,30,31,30,31],Nn=[31,28,31,30,31,30,31,31,30,31,30,31];function Yn(e,t){var n=new Date(e.getTime());while(t>0){var r=Un(n.getFullYear()),o=n.getMonth(),a=(r?Qn:Nn)[o];if(!(t>a-n.getDate()))return n.setDate(n.getDate()+t),n;t-=a-n.getDate()+1,n.setDate(1),o<11?n.setMonth(o+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function Xn(e,t,n,r){var o=Q[r+40>>2],a={tm_sec:Q[r>>2],tm_min:Q[r+4>>2],tm_hour:Q[r+8>>2],tm_mday:Q[r+12>>2],tm_mon:Q[r+16>>2],tm_year:Q[r+20>>2],tm_wday:Q[r+24>>2],tm_yday:Q[r+28>>2],tm_isdst:Q[r+32>>2],tm_gmtoff:Q[r+36>>2],tm_zone:o?B(o):""},i=B(n),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var s in l)i=i.replace(new RegExp(s,"g"),l[s]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){var r="number"===typeof e?e.toString():e||"";while(r.length<t)r=n[0]+r;return r}function f(e,t){return d(e,t,"0")}function m(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function p(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function h(e){var t=Yn(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),o=p(n),a=p(r);return m(o,t)<=0?m(a,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return u[e.tm_wday].substring(0,3)},"%A":function(e){return u[e.tm_wday]},"%b":function(e){return c[e.tm_mon].substring(0,3)},"%B":function(e){return c[e.tm_mon]},"%C":function(e){var t=e.tm_year+1900;return f(t/100|0,2)},"%d":function(e){return f(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return h(e).toString().substring(2)},"%G":function(e){return h(e)},"%H":function(e){return f(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":function(e){return f(e.tm_mday+jn(Un(e.tm_year+1900)?Qn:Nn,e.tm_mon-1),3)},"%m":function(e){return f(e.tm_mon+1,2)},"%M":function(e){return f(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return f(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:Yn(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(m(n,r)<0){var o=jn(Un(r.getFullYear())?Qn:Nn,r.getMonth()-1)-31,a=31-n.getDate(),i=a+o+r.getDate();return f(Math.ceil(i/7),2)}return 0===m(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),o=p(n),a=p(r),i=Yn(new Date(e.tm_year+1900,0,1),e.tm_yday);return m(i,o)<0?"53":m(a,i)<=0?"01":(t=o.getFullYear()<e.tm_year+1900?e.tm_yday+32-o.getDate():e.tm_yday+1-o.getDate(),f(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:Yn(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(m(n,r)<0){var o=jn(Un(r.getFullYear())?Qn:Nn,r.getMonth()-1)-31,a=31-n.getDate(),i=a+o+r.getDate();return f(Math.ceil(i/7),2)}return 0===m(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=Math.abs(t)/60,t=t/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var s in g)i.includes(s)&&(i=i.replace(new RegExp(s,"g"),g[s](a)));var v=Jn(i,!1);return v.length>t?0:(oe(v,e),v.length-1)}function Gn(e,t,n,r){return Xn(e,t,n,r)}function Jn(e,t,n){var r=n>0?n:L(e)+1,o=new Array(r),a=M(e,o,0,o.length);return t&&(o.length=a),o}Xe=l["InternalError"]=Ye(Error,"InternalError"),nt(),at=l["BindingError"]=Ye(Error,"BindingError"),It(),Qt(),Lt(),en=l["UnboundTypeError"]=Ye(Error,"UnboundTypeError"),hn();var Kn,er={g:Re,e:qe,d:Be,r:Ke,s:et,B:st,i:rn,h:an,b:un,A:vn,n:xn,f:Tn,c:Cn,o:In,j:_n,D:Dn,z:Sn,C:Pn,p:fn,q:kn,k:$n,l:Vn,u:Fn,v:Rn,x:On,y:Ln,a:zn,m:Hn,t:Zn,w:Gn},tr=(Fe(),l["___wasm_call_ctors"]=function(){return(l["___wasm_call_ctors"]=l["asm"]["F"]).apply(null,arguments)},l["_ImageGrabBoxROI"]=function(){return(l["_ImageGrabBoxROI"]=l["asm"]["G"]).apply(null,arguments)},l["_malloc"]=function(){return(tr=l["_malloc"]=l["asm"]["H"]).apply(null,arguments)}),nr=(l["__malloc"]=function(){return(l["__malloc"]=l["asm"]["I"]).apply(null,arguments)},l["__free"]=function(){return(l["__free"]=l["asm"]["J"]).apply(null,arguments)},l["_free"]=function(){return(nr=l["_free"]=l["asm"]["K"]).apply(null,arguments)}),rr=l["___getTypeName"]=function(){return(rr=l["___getTypeName"]=l["asm"]["M"]).apply(null,arguments)};l["___embind_register_native_and_builtin_types"]=function(){return(l["___embind_register_native_and_builtin_types"]=l["asm"]["N"]).apply(null,arguments)},l["dynCall_viijii"]=function(){return(l["dynCall_viijii"]=l["asm"]["O"]).apply(null,arguments)},l["dynCall_jiji"]=function(){return(l["dynCall_jiji"]=l["asm"]["P"]).apply(null,arguments)},l["dynCall_iiiiij"]=function(){return(l["dynCall_iiiiij"]=l["asm"]["Q"]).apply(null,arguments)},l["dynCall_iiiiijj"]=function(){return(l["dynCall_iiiiijj"]=l["asm"]["R"]).apply(null,arguments)},l["dynCall_iiiiiijj"]=function(){return(l["dynCall_iiiiiijj"]=l["asm"]["S"]).apply(null,arguments)};function or(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ar(e){function t(){Kn||(Kn=!0,l["calledRun"]=!0,A||(he(),l["onRuntimeInitialized"]&&l["onRuntimeInitialized"](),ve()))}e=e||p,be>0||(pe(),be>0||(l["setStatus"]?(l["setStatus"]("Running..."),setTimeout((function(){setTimeout((function(){l["setStatus"]("")}),1),t()}),1)):t()))}function ir(e,t){e,me()||(ge(),l["onExit"]&&l["onExit"](e),A=!0),g(e,new or(e))}if(l["addFunction"]=k,Ce=function e(){Kn||ar(),Kn||(Ce=e)},l["run"]=ar,l["preInit"]){"function"==typeof l["preInit"]&&(l["preInit"]=[l["preInit"]]);while(l["preInit"].length>0)l["preInit"].pop()()}ar();const lr={Module:l}},6465:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Bn});var r=n(3673);function o(e,t,n,o,a,i){const l=(0,r.up)("Index");return(0,r.wg)(),(0,r.j4)(l)}function a(e,t,n,o,a,i){const l=(0,r.up)("MainResultView"),s=(0,r.up)("ImageList"),u=(0,r.up)("UploadImage"),c=(0,r.up)("SingleTextView"),d=(0,r.up)("RecLanguageLoader"),f=(0,r.up)("q-resize-observer"),m=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(m,{class:"flex flex-center size-alignment"},{default:(0,r.w5)((()=>[(0,r.Wm)(l),(0,r.Wm)(s),(0,r.Wm)(u),(0,r.Wm)(c),(0,r.Wm)(d),(0,r.Wm)(f,{onResize:e.onResize},null,8,["onResize"])])),_:1})}var i=n(2323),l=n(8880);(0,r.dD)("data-v-5ee50180");const s={class:"boundDiv ImageList"},u=["onClick"],c=["src"],d={class:"Toolbar ImageListToolbar text-light-blue"};function f(e,t,n,o,a,f){const m=(0,r.up)("q-circular-progress"),p=(0,r.up)("q-spinner-ios"),h=(0,r.up)("q-inner-loading"),g=(0,r.up)("q-icon"),v=(0,r.up)("q-virtual-scroll"),w=(0,r.up)("ToolBtn"),y=(0,r.up)("q-item-section"),x=(0,r.up)("q-item"),b=(0,r.up)("q-list"),T=(0,r.up)("q-menu"),C=(0,r.up)("ExportPdf"),I=(0,r.up)("ExportTxt"),_=(0,r.up)("Configure"),D=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",s,[(0,r.Wm)(v,{items:a.RecoDataList,"virtual-scroll-horizontal":""},{default:(0,r.w5)((({item:t,index:n})=>[((0,r.wg)(),(0,r.iD)("div",{key:n,class:(0,i.C_)(["ImageItem relative-position delete",{ImageItemUnselected:a.selectedItem!==t,ImageItemSelected:a.selectedItem===t}]),onClick:e=>f.onItemClick(t)},[(0,r._)("img",{class:"ImageItemSize",src:t.url},null,8,c),(0,r.Wm)(h,{showing:void 0==t.text},{default:(0,r.w5)((()=>[t.isScaning?((0,r.wg)(),(0,r.j4)(m,{key:0,"show-value":"",class:"text-light-blue q-ma-md",value:a.progressVal,size:"50px",color:"light-blue"},null,8,["value"])):(0,r.kq)("",!0),t.isScaning?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(p,{key:1,size:"50%",color:"primary"}))])),_:2},1032,["showing"]),t.isScaning?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(g,{key:0,onClick:(0,l.iM)((e=>f.onItemDelete(t)),["stop"]),class:(0,i.C_)([{DeleteBtnHide:!e.$q.platform.is.mobile},"DeleteBtn DeleteBtnHV"]),name:"o_delete_outline"},null,8,["onClick","class"]))],10,u))])),_:1},8,["items"])]),(0,r._)("div",d,[(0,r.Wm)(w,{label:e.$t("ImageList.addImage"),IconName:"o_add_photo_alternate",onClick:f.onUploadClick},null,8,["label","onClick"]),e.$q.platform.is.mobile?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(w,{key:0,label:e.$t("ImageList.fromClipboard"),IconName:"content_paste",onClick:f.onPasteImage},null,8,["label","onClick"])),(0,r._)("div",null,[(0,r.Wm)(w,{label:e.$t("ImageList.more"),IconName:"more_horiz"},null,8,["label"]),(0,r.Wm)(T,{modelValue:a.showMenu,"onUpdate:modelValue":t[0]||(t[0]=e=>a.showMenu=e)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.MenuItems,(t=>((0,r.wg)(),(0,r.j4)(b,{dense:"",style:{"min-width":"100px"},key:t.label},{default:(0,r.w5)((()=>[!t.cond||t.cond()?(0,r.wy)(((0,r.wg)(),(0,r.j4)(x,{key:0,clickable:"",onClick:t.func},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{color:"primary",name:t.icon},null,8,["name"])])),_:2},1024),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t(t.label)),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[D]]):(0,r.kq)("",!0)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])]),a.ExportPdfShow?((0,r.wg)(),(0,r.j4)(C,{key:0,modelValue:a.ExportPdfShow,"onUpdate:modelValue":t[1]||(t[1]=e=>a.ExportPdfShow=e)},null,8,["modelValue"])):(0,r.kq)("",!0),a.ExportTxtShow?((0,r.wg)(),(0,r.j4)(I,{key:1,modelValue:a.ExportTxtShow,"onUpdate:modelValue":t[2]||(t[2]=e=>a.ExportTxtShow=e)},null,8,["modelValue"])):(0,r.kq)("",!0),a.ConfigureShow?((0,r.wg)(),(0,r.j4)(_,{key:2,modelValue:a.ConfigureShow,"onUpdate:modelValue":t[3]||(t[3]=e=>a.ConfigureShow=e)},null,8,["modelValue"])):(0,r.kq)("",!0)],64)}(0,r.Cn)();n(71);var m={callBackDict:{},keyValDict:{},addevent:(e,t,n=!1)=>{m.callBackDict[e]||(m.callBackDict[e]=[]),m.callBackDict[e].push(t),0==n&&void 0!=m.keyValDict[e]&&t(m.keyValDict[e])},rmevent:(e,t)=>{if(!m.callBackDict[e])return;let n=m.callBackDict[e].indexOf(t);n>=0&&m.callBackDict[e].splice(n,1)},set:(e,t)=>{if(m.keyValDict[e]=t,m.callBackDict[e])for(const n of m.callBackDict[e])n(t)},trig:e=>{m.set(e,!m.keyValDict[e])},get:e=>m.keyValDict[e]};const p=m;n(7965),n(6101),n(979),n(6105),n(2396);n.p;var h=n(2673);function g(){return new Worker(n.p+"js/AntOcrWorker.08bae6f2.worker.js")}const v=n.p+"f91b0416e9517bfd576b4654bc712562.tf",w=n.p+"592ed67e13a2ca0ca7bd0614ff158eb5.tf",y=n.p+"644bcca4eea52af1e33121a940e41599.tf",x=n.p+"c43b6f3fff445f88847343a445f01c04.tf",b=n.p+"36f987338d326a0339fbf5662ec04473.tf",T=n.p+"0120c1c55690be53d0d59a49bfa4f228.tf",C=n.p+"7ab430b2ff567e1eff986ea092bb78e0.tf",I=n.p+"b66f6a54ccc99cf6f08e71e6ab25010d.tf",_=n.p+"de3fd5408fa47bb690369bbb82b78ce8.tf",D=n.p+"7ec01f4aebd077a3a9d9d1e6cd7b8e2b.tf",S=n.p+"dfbc0cf2d00af43499155509ba1dc806.tf";let P={"zh-CHS":[v,w,y],"en-US":[v,x,b],ja:[v,T,C],ko:[v,I,_],"zh-CHT":[v,D,S]};var k={langList:["zh-CHS","zh-CHT","en-US","ja","ko"],calcProgress:function(){let e=k.totalSize[0]+k.totalSize[1]+k.totalSize[2],t=k.loadedSize[0]+k.loadedSize[1]+k.loadedSize[2];k.onprogress&&k.onprogress(t,e)},downLang:function(e){k.urls=P[e],k.xhrarr=[new XMLHttpRequest,new XMLHttpRequest,new XMLHttpRequest],k.totalSize=[2304374,4362980,13250],k.loadedSize=[0,0,0],k.buffarr=[void 0,void 0,void 0];for(let t=0;t<k.xhrarr.length;t++){let e=k.xhrarr[t];e.open("GET",k.urls[t]),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.responseType="arraybuffer",e.xhrarrID=t,e.onprogress=function(e){e.lengthComputable&&(k.totalSize[this.xhrarrID]=e.total,k.loadedSize[this.xhrarrID]=e.loaded,k.calcProgress())},e.onload=function(e){4===this.readyState&&200===this.status&&(k.buffarr[this.xhrarrID]=this.response,k.buffarr[0]&&k.buffarr[1]&&k.buffarr[2]&&(k.onfinish&&k.onfinish(k.buffarr),k.buffarr=void 0))},e.send(null)}}};const W=k;var $=document.createElement("canvas"),V=$.getContext("2d");function F(e,t){$.width=e,$.height=t}var A={createNew:function(){var e={isBusy:!1,txtCount:0};return e.langList=W.langList,e.ocrImage=function(t){F(t.width,t.height),V.fillStyle="white",V.fillRect(0,0,t.width,t.height),V.drawImage(t,0,0);var n=V.getImageData(0,0,t.width,t.height);let r=new ArrayBuffer(n.data.length);var o=new Uint8Array(r);for(let e=0;e<o.length;e++)o[e]=n.data[e];e.worker.postMessage(["rec",t.width,t.height,r],[r])},e.ocrImageUrl=function(t,n){var r=new Image;e.isBusy?e["onError"]&&e["onError"]("antocr is busy"):(e.isBusy=!0,r.userData=n,r.onload=function(){e.onImageLoad&&e.onImageLoad(this,this.userData),e.ocrImage(this)},r.src=t)},e.onmessage=function(t){if("Init"==t.data)return e.onRuntimeInitialized&&e.onRuntimeInitialized(),void(e.init=!0);if("recFinish"==t.data[0]){var n=JSON.parse(t.data[3]);n.langCode=e.langCode,e.isBusy=!1,e["onRecognitionCompleted"]&&e["onRecognitionCompleted"](n)}"progressCB"==t.data[0]&&e["onProgress"]&&e["onProgress"](t.data[1],t.data[2])},e.init=function(){e.worker=new g,e.worker.onmessage=e.onmessage},e.setLang=function(t){e.onSetLangBegin&&e.onSetLangBegin(t),W.downLang(t),W.onprogress=e.onprogress,W.onfinish=function(n){e.worker.postMessage(["setParams",n[0],n[1],n[2]],[n[0],n[1],n[2]]),e.langCode=t,e.onSetLangFinish&&e.onSetLangFinish()}},e}};let R=h.Z.Module;function q(e,t){let n=e;F(n.width,n.height),V.fillStyle="white",V.fillRect(0,0,n.width,n.height),V.drawImage(n,0,0);var r=V.getImageData(0,0,n.width,n.height);let o=new ArrayBuffer(r.data.length);var a=new Uint8Array(o);for(let d=0;d<a.length;d++)a[d]=r.data[d];let i=R.__malloc(a.length);R.HEAPU8.set(a,i);let l=R._ImageGrabBoxROI(i,n.width,n.height,t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);R.__free(i);let s=R.HEAPU32[l/4],u=R.HEAPU32[l/4+1];l+=8;const c=R.HEAPU8.subarray(l,l+s*u*4);return R.__free(l-8),F(s,u),r=V.createImageData(s,u),r.data.set(c),V.putImageData(r,0,0),{width:s,height:u,url:$.toDataURL("image/png")}}var E=A.createNew(),B=n(6417),M=n(2353),O=n(4325);let L,z={},H=1;const{t:Z}=O.i18n.global;function U(e){for(let t=0;t<L.length;t++)if(e==L[t].id)return t;return-1}function j(e,t){const n=.7;let r=e.rect[0].y,o=t.rect[0].y,a=e.rect[2].y-e.rect[0].y,i=t.rect[2].y-t.rect[0].y;return r+=a*(1-n)/2,o+=i*(1-n)/2,a*=n,i*=n,!(r+a<o)&&!(o+i<r)}function Q(){return-1!=navigator.userAgent.indexOf("Firefox")}function N(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),o=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return t+"-"+n+"-"+r+"-"+o+"-"+a+"-"+i}z.initList=function(e){void 0==L&&(L=e,z.RecoDataList=L)},z.selectedId=-1,z.selectedChangeCB=[],z.scannedCount=0,z.changeSelected=function(e){if(e==z.selectedId)return;z.selectedId=e;let t=U(e);console.log("new selectedId,",z.selectedId),t<0?M.Z.set("selectedItem",{}):M.Z.set("selectedItem",L[t])},z.deleteAll=function(){let e=0;while(L.length>e)L[e].isScaning?e+=1:L.splice(e,1);z.changeSelected(e>0?L[0].id:-1)},z.deleteItem=function(e){let t=U(e);L.splice(t,1),z.selectedId==e&&(L.length>t?z.changeSelected(L[t].id):L.length>0?z.changeSelected(L[L.length-1].id):z.changeSelected(-1))},z.getSelectedItem=function(){return console.log("getSelectedItem"),z.selectedId>-1?L[U(z.selectedId)]:void 0},z.getItemByID=function(e){let t=U(e);return t<0?{}:L[t]},z.addImage=function(e,t){var n=new Image;n.onload=function(){var e={};e.url=this.src,e.selected=!1,e.id=H,e.filename=this.filename,e.imgWidth=this.width,e.imgHeight=this.height,H+=1,L.unshift(e),E.isBusy||z.recognitionImage(e.id)},n.src=e,n.filename=t},z.refreshItemText=function(e){let t="",n=e.detail,r=M.Z.get("recThres");for(let o=0;o<n.length;o++)n[o].score<r||(""!==t?(j(n[o-1],n[o])||(t+="\n"),t=t+" "+n[o].text):t=n[o].text);e.text=t},z.recognitionImage=function(e){let t;if(E.isBusy)return!1;if(e)t=U(e);else{if(e=z.selectedId,e<0)return;if(t=U(e),void 0!=L[t].text){for(t=L.length-1;t>=0;t--)if(void 0==L[t].text){e=L[t].id;break}if(t<0)return}}void 0==L[t].text&&(p.trig("RecognitionBegin"),E.onRecognitionCompleted=n=>{t=U(e),t<0||(L[t].detail=n,L[t].isScaning=!1,z.scannedCount++,z.refreshItemText(L[t]),z.selectedId==L[t].id&&p.trig("SeclectedRecoStateChanged"),z.recognitionImage(),console.log("recognitionImage next"))},E.onImageLoad=(e,n)=>{t=U(n),z.selectedId<=0&&z.changeSelected(L[t].id)},L[t].isScaning=!0,E.ocrImageUrl(L[t].url,e),console.log("ocrImageUrl",e))},z.reRecoAll=function(e){for(const t of L)t.text=void 0;z.recognitionImage(),p.trig("SeclectedRecoStateChanged")},z.reReco=function(e){void 0==e&&(e=z.selectedId);let t=U(e);L[t].text=void 0,z.recognitionImage(),e==z.selectedId&&p.trig("SeclectedRecoStateChanged")},z.addFromClipboard=function(e){if(void 0==e)Q()?B.Z.create({type:"warning",message:"imagelist.tips_clipboard_firefox_only_hotkey"}):navigator.clipboard.read().then((e=>{console.log("Pasted content: ",e);var t=!1;for(let r=0;r<e.length;r++)for(var n of e[r].types)-1!==n.indexOf("image")&&(t=!0,e[r].getType(n).then((e=>{let t=URL.createObjectURL(e);z.addImage(t,"Clipboard_"+N()+".png")})));t||B.Z.create({type:"warning",message:Z("imagelist.tips_clipboard_no_image")})})).catch((e=>{console.log("i18n",O.i18n),B.Z.create({type:"negative",message:Z("imagelist.tips_clipboard_faild")})}));else for(const t of e.clipboardData.items){if(0!=t.type.indexOf("image"))return;let n=t.getAsFile(),r=URL.createObjectURL(n);z.addImage(r,"Clipboard_"+N()+".png"),e.preventDefault(),e.stopPropagation()}},window.addEventListener("paste",(async function(e){console.log("addFromClipboard",e),z.addFromClipboard(e)})),z.empty=function(){return!L.length},(0,r.dD)("data-v-2508d9a8");const Y={key:1,class:"iconlabel block"};function X(e,t,n,o,a,l){const s=(0,r.up)("q-icon");return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["BtnBound",{disable:n.disable}]),style:(0,i.j5)("font-size: "+(n.IconSize?n.IconSize:"30px"))},[n.IconName?((0,r.wg)(),(0,r.j4)(s,{key:0,name:n.IconName},null,8,["name"])):(0,r.kq)("",!0),n.label?((0,r.wg)(),(0,r.iD)("span",Y,(0,i.zw)(n.label),1)):(0,r.kq)("",!0)],6)}(0,r.Cn)();const G={props:["IconName","label","disable","IconSize"]};var J=n(4554),K=n(7518),ee=n.n(K);G.render=X,G.__scopeId="data-v-2508d9a8";const te=G;ee()(G,"components",{QIcon:J.Z}),(0,r.dD)("data-v-0022090d");const ne=["src"],re=(0,r._)("div",{class:"text-weight-bold"},"Downloading PDF module",-1);function oe(e,t,n,o,a,l){const s=(0,r.up)("q-icon"),u=(0,r.up)("q-space"),c=(0,r.up)("q-btn"),d=(0,r.up)("q-bar"),f=(0,r.up)("q-header"),m=(0,r.up)("q-toolbar"),p=(0,r.up)("q-footer"),h=(0,r.up)("q-input"),g=(0,r.up)("q-select"),v=(0,r.up)("q-form"),w=(0,r.up)("q-page"),y=(0,r.up)("q-page-container"),x=(0,r.up)("q-layout"),b=(0,r.up)("q-dialog"),T=(0,r.up)("q-linear-progress"),C=(0,r.up)("q-card-section"),I=(0,r.up)("q-card"),_=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[n.modelValue&&a.showDialog?((0,r.wg)(),(0,r.j4)(b,{key:0,ref:"dialog",modelValue:n.modelValue,onHide:t[7]||(t[7]=t=>e.$emit("update:modelValue",!1))},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{ref:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{name:"o_file_download"}),(0,r._)("div",null,(0,i.zw)(e.$t("exportPDF")),1),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"close"},null,512),[[_]])])),_:1})])),_:1},512),(0,r.Wm)(p,{ref:"footer"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"",flat:"",icon:a.pdfPreviewUrl?"o_settings":"o_preview",onClick:t[0]||(t[0]=e=>{a.pdfPreviewUrl?a.pdfPreviewUrl=void 0:l.exportPDF(!0)}),size:"md",label:a.pdfPreviewUrl?e.$t("exportPDF.config"):e.$t("exportPDF.preview")},null,8,["icon","label"]),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"o_file_download",onClick:t[1]||(t[1]=e=>l.exportPDF(!1)),size:"md",label:e.$t("exportPDF.export")},null,8,["label"]),[[_]]),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",size:"md",icon:"close",label:e.$t("exportPDF.cancel")},null,8,["label"]),[[_]])])),_:1})])),_:1},512),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[a.pdfPreviewUrl?((0,r.wg)(),(0,r.iD)("iframe",{key:0,ref:"pdfIframe",src:a.pdfPreviewUrl,frameborder:"0",width:"100%",style:{"min-height":"inherit"}},null,8,ne)):(0,r.kq)("",!0),a.pdfPreviewUrl?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(v,{key:1,class:"q-ma-md q-gutter-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{filled:"",modelValue:a.fileName,"onUpdate:modelValue":t[2]||(t[2]=e=>a.fileName=e),label:"$t('exportPDF.filename')","lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("exportPDF.mustHaveFilename")]},null,8,["modelValue","rules"]),(0,r.Wm)(g,{"map-options":"",outlined:"",label:e.$t("exportPDF.exportImage"),modelValue:a.exportImage.value,"onUpdate:modelValue":t[3]||(t[3]=e=>a.exportImage.value=e),options:a.exportImage.list},null,8,["label","modelValue","options"]),(0,r.Wm)(g,{"map-options":"",outlined:"",label:e.$t("exportPDF.exportData"),modelValue:a.exportData.value,"onUpdate:modelValue":t[4]||(t[4]=e=>a.exportData.value=e),options:a.exportData.list},null,8,["label","modelValue","options"]),(0,r.Wm)(g,{"map-options":"",outlined:"",label:e.$t("exportPDF.textVisible"),modelValue:a.textVisible.value,"onUpdate:modelValue":t[5]||(t[5]=e=>a.textVisible.value=e),options:a.textVisible.list},null,8,["label","modelValue","options"]),(0,r.Wm)(g,{"map-options":"",outlined:"",label:e.$t("exportPDF.withOriImage"),modelValue:a.withOriImage.value,"onUpdate:modelValue":t[6]||(t[6]=e=>a.withOriImage.value=e),options:a.withOriImage.list},null,8,["label","modelValue","options"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,r.kq)("",!0),a.showInitDialog?((0,r.wg)(),(0,r.j4)(b,{key:1,modelValue:!0,onHide:t[8]||(t[8]=t=>e.$emit("update:modelValue",!1)),seamless:"",position:"bottom"},{default:(0,r.w5)((()=>[(0,r.Wm)(I,{style:{width:"350px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{value:a.downPrecent,color:"pink"},null,8,["value"]),(0,r.Wm)(C,{class:"row items-center no-wrap"},{default:(0,r.w5)((()=>[re,(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{flat:"",round:"",icon:"close"},null,512),[[_]])])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0)],64)}(0,r.Cn)();var ae=n(9587);const ie=n.p+"97a745e4ec4d6c4f3da96103363915ee.tf";let le={},se={};var ue={Preview:"Preview",SaveToFile:"SaveToFile"},ce={NoAttach:"WithoutOriImage",AttachOnNext:"OriImageOnNext",AttachOnLast:"OriImageOnLast"};function de(){se.action=ue.Preview,se.filename="Pearocr1",se.onlyText=!1,se.visibleText=!0,se.ImageAttached=ce.AttachOnNext,se.textBGColor="#faebd7",se.addPageNum=!0,se.pageNumPading=4,se.pageNumSize=9,se.addWatermark=!0,se.watermarkPading=4,se.watermarkSize=9,se.watermarkText="power by pearocr.com"}function fe(e){return e[3]}function me(e){return-Math.atan((e[0].y-e[1].y)/(e[0].x-e[1].x))}function pe(e){let t={},n=e[0],r=e[1],o=Math.sqrt((n.x-r.x)*(n.x-r.x)*1+(n.y-r.y)*(n.y-r.y));n=e[1],r=e[2];let a=Math.sqrt((n.x-r.x)*(n.x-r.x)*1+(n.y-r.y)*(n.y-r.y));return t.width=Math.max(o,a),t.height=Math.min(o,a),t}function he(e){return le.pageWidth=e.imgWidth,le.pageHeight=e.imgHeight+2*se.watermarkPading+se.watermarkSize,se.addPageNum&&(le.pageHeight+=2*se.pageNumPading+se.pageNumSize),[le.pageHeight,le.pageWidth]}function ge(e,t){if(!se.addPageNum)return;let n=le.doc;n.setFontSize(se.watermarkSize);let r=le.pageHeight-se.pageNumPading;se.addWatermark&&(r-=2*se.watermarkPading+se.watermarkSize),n.text(e.toString()+" / "+t.toString(),le.pageWidth/2,r,{align:"center",baseline:"bottom"})}function ve(){if(!se.addWatermark)return;let e=le.doc;e.setFontSize(se.watermarkSize);let t=e.getTextColor();e.setTextColor("#1a0dbe"),e.textWithLink(se.watermarkText,le.pageWidth/2,le.pageHeight-se.watermarkPading,{align:"center",baseline:"bottom",url:"https://pearocr.com"}),e.setTextColor(t)}function we(e,t,n,r,o){let a=he(t);e.addPage(a,a[1]>a[0]?"l":"p"),e.addImage(t.url,"JPEG",0,0,t.imgWidth,t.imgHeight,o,"FAST"),ge(n,r),ve()}de(),le.isInit=!1,le.init=()=>{if(le.xhr)return;let e=new XMLHttpRequest;e.open("GET",ie),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.responseType="text",e.onprogress=function(e){e.lengthComputable&&p.set("PDFRenderInitProgress",e.loaded/e.total)},e.onload=function(e){4===this.readyState&&200===this.status&&(le.font=this.response,le.isInit=!0,p.trig("PDFRenderInited"))},e.send(null),le.xhr=e};var ye=function(){this.addFileToVFS("simhei-normal.ttf",le.font),this.addFont("simhei-normal.ttf","simhei","normal"),this.addFont("simhei-normal.ttf","simhei","bold"),this.addFont("simhei-normal.ttf","simhei","italic"),this.addFont("simhei-normal.ttf","simhei","bolditalic")};let xe;ae.kH.API.events.push(["addFonts",ye]),le.render=(e,t)=>{Object.assign(se,t),Array.isArray(e)||(e=[e]);let n=e.length;se.ImageAttached!=ce.NoAttach&&(n*=2);let r,o=1,a=1;for(const i of e){let e=he(i),t="img_"+a.toString();a++,void 0==r?(le.doc=new ae.kH({orientation:e[1]>e[0]?"l":"p",unit:"px",format:e,putOnlyUsedFonts:!0,floatPrecision:16,hotfixes:["px_scaling"]}),r=le.doc):r.addPage(e,e[1]>e[0]?"l":"p"),r.setFont("simhei"),!se.onlyText&&se.visibleText&&r.addImage(i.url,"JPEG",0,0,i.imgWidth,i.imgHeight,t,"FAST");for(const n of i.detail){let e=n.textEdited?n.textEdited:n.text;if(!e)continue;r.setFillColor(se.textBGColor),r.moveTo(n.rect[0].x,n.rect[0].y),r.lineTo(n.rect[1].x,n.rect[1].y),r.lineTo(n.rect[2].x,n.rect[2].y),r.lineTo(n.rect[3].x,n.rect[3].y),r.lineTo(n.rect[0].x,n.rect[0].y),r.fill();let t=pe(n.rect);r.setFontSize(.85*t.height);let o=r.getFontSize(),a=r.context2d.measureText(e).width,i=0;a>t.width&&(o*=t.width/a,r.setFontSize(.85*o),a=r.context2d.measureText(e).width),a<t.width&&e.length>1&&(i=(t.width-a)/(e.length-1),a=t.width);let l=me(n.rect),s=fe(n.rect);r.text(e,s.x,s.y,{baseline:"bottom",angle:180*l/Math.PI,charSpace:i})}se.onlyText||se.visibleText||r.addImage(i.url,"JPEG",0,0,i.imgWidth,i.imgHeight,t,"FAST"),ge(o,n),o+=1,ve(),se.visibleText&&se.ImageAttached==ce.AttachOnNext&&(we(r,i,o,n,t),o+=1)}if(a=1,se.visibleText&&se.ImageAttached==ce.AttachOnLast)for(const i of e){a.toString();a++,we(r,i,o,n),o+=1}if(se.action==ue.Preview)return r.output("datauristring");se.action!=ue.SaveToFile||r.save(se.filename)};const be={data(){return{showDialog:!1,showInitDialog:!1,downPrecent:0,showText:!0,recLangCode:"",fileName:"PearOCR",pdfPreviewUrl:"",model:null,exportImage:{value:"AllImages",list:[{label:this.$t("exportPDF.AllImages"),value:"AllImages"},{label:this.$t("exportPDF.CurrentImage"),value:"CurrentImage"}]},exportData:{value:"ExportTextImage",list:[{label:this.$t("exportPDF.ExportTextImage"),value:"ExportTextImage"},{label:this.$t("exportPDF.ExportTextOnly"),value:"ExportTextOnly"}]},textVisible:{value:"Visible",list:[{label:this.$t("exportPDF.Visible"),value:"Visible"},{label:this.$t("exportPDF.Invisible"),value:"Invisible"}]},withOriImage:{value:"WithoutOriImage",list:[{label:this.$t("exportPDF.WithoutOriImage"),value:"WithoutOriImage"},{label:this.$t("exportPDF.OriImageOnNext"),value:"OriImageOnNext"},{label:this.$t("exportPDF.OriImageOnLast"),value:"OriImageOnLast"}]}}},props:["modelValue"],emits:["update:modelValue"],created(){xe=this,le.isInit?this.showDialog=!0:(p.addevent("PDFRenderInitProgress",(function(e){xe.downPrecent=e})),p.addevent("PDFRenderInited",(function(){xe.showInitDialog=!1,xe.showDialog=!0})),this.showInitDialog=!0,le.init())},methods:{exportPDF(e){let t;t="AllImages"===this.exportImage.value?L:[z.getSelectedItem()];const n={};n.onlyText="ExportTextOnly"===this.exportData.value,n.filename=this.fileName?this.fileName:"PearOCR",n.visibleText="Visible"===this.textVisible.value,n.ImageAttached=this.withOriImage.value,n.action=e?ue.Preview:ue.SaveToFile,this.pdfPreviewUrl=le.render(t,n)}}};var Te=n(5926),Ce=n(3066),Ie=n(3812),_e=n(846),De=n(2025),Se=n(4607),Pe=n(1762),ke=n(9570),We=n(2652),$e=n(4379),Ve=n(5269),Fe=n(4842),Ae=n(362),Re=n(151),qe=n(1598),Ee=n(5589),Be=n(677);be.render=oe,be.__scopeId="data-v-0022090d";const Me=be;ee()(be,"components",{QDialog:Te.Z,QLayout:Ce.Z,QHeader:Ie.Z,QBar:_e.Z,QIcon:J.Z,QSpace:De.Z,QBtn:Se.Z,QFooter:Pe.Z,QToolbar:ke.Z,QPageContainer:We.Z,QPage:$e.Z,QForm:Ve.Z,QInput:Fe.Z,QSelect:Ae.Z,QCard:Re.Z,QLinearProgress:qe.Z,QCardSection:Ee.Z}),ee()(be,"directives",{ClosePopup:Be.Z}),(0,r.dD)("data-v-0af32eb9");const Oe=["value"];function Le(e,t,n,o,a,l){const s=(0,r.up)("q-icon"),u=(0,r.up)("q-space"),c=(0,r.up)("q-btn"),d=(0,r.up)("q-bar"),f=(0,r.up)("q-header"),m=(0,r.up)("q-toolbar"),p=(0,r.up)("q-footer"),h=(0,r.up)("q-input"),g=(0,r.up)("q-select"),v=(0,r.up)("q-form"),w=(0,r.up)("q-page"),y=(0,r.up)("q-page-container"),x=(0,r.up)("q-layout"),b=(0,r.up)("q-dialog"),T=(0,r.Q2)("close-popup");return n.modelValue?((0,r.wg)(),(0,r.j4)(b,{key:0,ref:"dialog",modelValue:n.modelValue,onHide:t[5]||(t[5]=t=>e.$emit("update:modelValue",!1))},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{ref:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{name:"o_file_download"}),(0,r._)("div",null,(0,i.zw)(e.$t("exportTXT")),1),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"close"},null,512),[[T]])])),_:1})])),_:1},512),(0,r.Wm)(p,{ref:"footer"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"",flat:"",icon:a.previewTxt?"o_settings":"o_preview",onClick:t[0]||(t[0]=e=>{a.previewTxt?a.previewTxt=void 0:l.exportTXT(!0)}),size:"md",label:a.previewTxt?e.$t("exportPDF.config"):e.$t("exportPDF.preview")},null,8,["icon","label"]),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"o_file_download",onClick:t[1]||(t[1]=e=>l.exportTXT(!1)),size:"md",label:e.$t("exportPDF.export")},null,8,["label"]),[[T]]),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",size:"md",icon:"close",label:e.$t("exportPDF.cancel")},null,8,["label"]),[[T]])])),_:1})])),_:1},512),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[a.previewTxt?((0,r.wg)(),(0,r.iD)("textarea",{key:0,width:"100%",style:{"min-height":"inherit"},class:"textItem",value:a.previewTxt},null,8,Oe)):(0,r.kq)("",!0),a.previewTxt?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(v,{key:1,class:"q-ma-md q-gutter-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{filled:"",modelValue:a.fileName,"onUpdate:modelValue":t[2]||(t[2]=e=>a.fileName=e),label:"$t('exportPDF.filename')","lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("exportPDF.mustHaveFilename")]},null,8,["modelValue","rules"]),(0,r.Wm)(g,{outlined:"","map-options":"",label:e.$t("exportTXT.exportText"),modelValue:a.exportText.value,"onUpdate:modelValue":t[3]||(t[3]=e=>a.exportText.value=e),options:a.exportText.list},null,8,["label","modelValue","options"]),(0,r.Wm)(g,{outlined:"","map-options":"",label:e.$t("exportTXT.textDivided"),modelValue:a.textDivided.value,"onUpdate:modelValue":t[4]||(t[4]=e=>a.textDivided.value=e),options:a.textDivided.list},null,8,["label","modelValue","options"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,r.kq)("",!0)}function ze(e,t){const n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),document.createEvent){const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),n.dispatchEvent(e)}else n.click()}(0,r.Cn)();const He={data(){return{fileName:"PearOCR",previewTxt:"",exportText:{value:"AllTexts",list:[{label:this.$t("exportTXT.AllTexts"),value:"AllTexts"},{label:this.$t("exportTXT.CurrentText"),value:"CurrentText"}]},textDivided:{value:"DividedTexts",list:[{label:this.$t("exportTXT.DividedTexts"),value:"DividedTexts"},{label:this.$t("exportTXT.Undivided"),value:"Undivided"}]}}},props:["modelValue"],emits:["update:modelValue"],methods:{exportTXT(e){let t,n="";t="AllTexts"===this.exportText.value?L:[z.getSelectedItem()];for(const r of t)"DividedTexts"===this.textDivided.value&&(n&&(n+="\n"),n+="------------ "+r.filename+" ------------\n"),n+=r.text,n+="\n";n+="\n------------ prower by PearOCR.com ------------\n",e?this.previewTxt=n:ze(this.fileName,n)}}};He.render=Le,He.__scopeId="data-v-0af32eb9";const Ze=He;ee()(He,"components",{QDialog:Te.Z,QLayout:Ce.Z,QHeader:Ie.Z,QBar:_e.Z,QIcon:J.Z,QSpace:De.Z,QBtn:Se.Z,QFooter:Pe.Z,QToolbar:ke.Z,QPageContainer:We.Z,QPage:$e.Z,QForm:Ve.Z,QInput:Fe.Z,QSelect:Ae.Z}),ee()(He,"directives",{ClosePopup:Be.Z}),(0,r.dD)("data-v-0d0ca165");const Ue={class:"q-gutter-md row items-start ConfigureGroup"},je={class:"q-gutter-md row items-start ConfigureGroup"};function Qe(e,t,n,o,a,l){const s=(0,r.up)("q-icon"),u=(0,r.up)("q-space"),c=(0,r.up)("q-btn"),d=(0,r.up)("q-bar"),f=(0,r.up)("q-header"),m=(0,r.up)("q-toolbar"),p=(0,r.up)("q-footer"),h=(0,r.up)("q-input"),g=(0,r.up)("q-select"),v=(0,r.up)("q-toggle"),w=(0,r.up)("q-form"),y=(0,r.up)("q-page"),x=(0,r.up)("q-page-container"),b=(0,r.up)("q-layout"),T=(0,r.up)("q-dialog"),C=(0,r.Q2)("close-popup");return n.modelValue?((0,r.wg)(),(0,r.j4)(T,{key:0,ref:"dialog",modelValue:n.modelValue,onHide:t[6]||(t[6]=t=>e.$emit("update:modelValue",!1))},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{ref:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{name:"o_settings"}),(0,r._)("div",null,(0,i.zw)(e.$t("configure")),1),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"close"},null,512),[[C]])])),_:1})])),_:1},512),(0,r.Wm)(p,{ref:"footer"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"o_check",onClick:t[0]||(t[0]=e=>l.saveConfigure()),size:"md",label:e.$t("configure.apply")},null,8,["label"]),[[C]]),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",size:"md",icon:"close",label:e.$t("configure.cancel")},null,8,["label"]),[[C]])])),_:1})])),_:1},512),(0,r.Wm)(x,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,{class:"q-ma-md q-gutter-md"},{default:(0,r.w5)((()=>[(0,r._)("div",Ue,[(0,r.Wm)(h,{class:"col",modelValue:a.highlightErrWordThres,"onUpdate:modelValue":t[1]||(t[1]=e=>a.highlightErrWordThres=e),label:e.$t("configure.errWordThres")},null,8,["modelValue","label"]),(0,r.Wm)(g,{class:"col","map-options":"",outlined:"",modelValue:a.errWordHandle.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.errWordHandle.value=e),label:e.$t("configure.errWordHandle"),options:a.errWordHandle.list},null,8,["modelValue","label","options"])]),(0,r._)("div",je,[(0,r.Wm)(h,{class:"col",modelValue:a.recThres,"onUpdate:modelValue":t[3]||(t[3]=e=>a.recThres=e),label:e.$t("configure.errTextThres")},null,8,["modelValue","label"]),(0,r.Wm)(v,{class:"col",modelValue:a.keepLowScore,"onUpdate:modelValue":t[4]||(t[4]=e=>a.keepLowScore=e),label:e.$t("configure.errTextHighlight")},null,8,["modelValue","label"])]),(0,r.Wm)(g,{outlined:"",modelValue:a.sortingType.value,"onUpdate:modelValue":t[5]||(t[5]=e=>a.sortingType.value=e),label:e.$t("configure.sortingOfNewImages"),options:a.sortingType.list,"map-options":""},null,8,["modelValue","label","options"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,r.kq)("",!0)}(0,r.Cn)();const Ne={data(){return{errWordHandle:{value:"Normal",list:[{label:this.$t("configure.errWordHandle.Normal"),value:"Normal"},{label:this.$t("configure.errWordHandle.Highlight"),value:"Highlight"},{label:this.$t("configure.errWordHandle.IgnoreTwoEnds"),value:"IgnoreTwoEnds"},{label:this.$t("configure.errWordHandle.IgnoreTwoEndsHighlistOther"),value:"IgnoreTwoEndsHighlistOther"}]},highlightErrWordThres:"0.60",recThres:"",keepLowScore:!1,sortingType:{value:"byAddOrder",list:[{label:this.$t("configure.sortingType.byAddOrder"),value:"byAddOrder"},{label:this.$t("configure.sortingType.byFileName"),value:"byFileName"}]}}},props:["modelValue"],emits:["update:modelValue"],created(){M.Z.getToDict(this)},methods:{saveConfigure(){M.Z.setFromDict(this),M.Z.save()}}};var Ye=n(2582);Ne.render=Qe,Ne.__scopeId="data-v-0d0ca165";const Xe=Ne;let Ge;ee()(Ne,"components",{QDialog:Te.Z,QLayout:Ce.Z,QHeader:Ie.Z,QBar:_e.Z,QIcon:J.Z,QSpace:De.Z,QBtn:Se.Z,QFooter:Pe.Z,QToolbar:ke.Z,QPageContainer:We.Z,QPage:$e.Z,QForm:Ve.Z,QInput:Fe.Z,QSelect:Ae.Z,QToggle:Ye.Z}),ee()(Ne,"directives",{ClosePopup:Be.Z});const Je={components:{ToolBtn:te,ExportPdf:Me,ExportTxt:Ze,Configure:Xe},data(){return{ExportPdfShow:!1,ExportTxtShow:!1,ConfigureShow:!1,RecoDataList:[],selectedItem:void 0,progressVal:0,showMenu:!1,MenuItems:[{label:"menu.exportPDF",func:function(){Ge.ExportPdfShow=!0},icon:"o_picture_as_pdf",cond:this.listNotEmpty},{label:"menu.exportTXT",cond:this.listNotEmpty,func:function(){Ge.ExportTxtShow=!0},icon:"o_description"},{label:"menu.deleteAllImages",func:this.onDeleteAll,icon:"o_delete_forever"},{label:"menu.reIdentifyAll",func:z.reRecoAll,icon:"o_restart_alt"},{label:"menu.configure",func:function(){Ge.ConfigureShow=!0},icon:"o_settings"}]}},created(){Ge=this,z.initList(Ge.RecoDataList),console.log(z.RecoDataList),Ge.RecoDataList=z.RecoDataList,p.addevent("RecognitionBegin",(()=>{Ge.progressVal=0})),E.onProgress=function(e,t){Ge.progressVal=50*e+Math.round(t/2),100===Ge.progressVal&&(Ge.progressVal=99)},M.Z.addMonitor(["selectedItem"],this)},methods:{listNotEmpty(){return!z.empty()},onUploadClick(){p.trig("UploadImage")},onPasteImage(){z.addFromClipboard()},onItemClick(e){z.changeSelected(e.id)},onDeleteAll(){z.deleteAll(),z.selectedId>0&&this.$q.notify({message:this.$t("message.waitIdentityFinish"),color:"red",timeout:500})},onItemDelete(e){e.isScaning?this.$q.notify({message:this.$t("message.waitIdentityFinish"),color:"red",timeout:500}):z.deleteItem(e.id)}},watch:{RecoDataList:{deep:!0,handler(e){}}}};var Ke=n(7369),et=n(6941),tt=n(6122),nt=n(8506),rt=n(6335),ot=n(7011),at=n(3414),it=n(2035);Je.render=f,Je.__scopeId="data-v-5ee50180";const lt=Je;function st(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("input",{ref:"inputFile",type:"file",style:{display:"none"},onChange:t[0]||(t[0]=e=>i.addImgPreview()),accept:"image/*",multiple:""},null,544)}let ut;ee()(Je,"components",{QBtn:Se.Z,QVirtualScroll:Ke.Z,QInnerLoading:et.Z,QCircularProgress:tt.Z,QSpinnerIos:nt.Z,QIcon:J.Z,QMenu:rt.Z,QList:ot.Z,QItem:at.Z,QItemSection:it.Z}),ee()(Je,"directives",{ClosePopup:Be.Z});const ct={data(){return{RecoDataList:[]}},created(){ut=this,z.initList(ut.RecoDataList),ut.RecoDataList=z.RecoDataList,p.addevent("UploadImage",(()=>{ut.$refs.inputFile.dispatchEvent(new MouseEvent("click"))}))},methods:{addImgPreview(e){e||(e=this.$refs.inputFile.files);for(const t of e){if(!t)return void console.log("error");{if("image"!==t.type.substring(0,5))return;const e=new FileReader;e.readAsDataURL(t),e.filename=t.name,e.onload=function(t){z.addImage(this.result,e.filename)}}}this.$refs.inputFile.value=""}}};ct.render=st;const dt=ct;(0,r.dD)("data-v-b17567d4");const ft={key:1,style:{height:"100%"}};function mt(e,t,n,o,a,i){const l=(0,r.up)("RecLangToolbar"),s=(0,r.up)("RViewImageText"),u=(0,r.up)("RViewText"),c=(0,r.up)("q-splitter");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l),(0,r._)("div",{class:"MainImageView",onClick:t[1]||(t[1]=(...e)=>i.onMainImageViewClick&&i.onMainImageViewClick(...e))},[e.$q.screen.gt.sm?((0,r.wg)(),(0,r.j4)(c,{key:0,modelValue:a.splitterModel,"onUpdate:modelValue":t[0]||(t[0]=e=>a.splitterModel=e),style:{height:"100%"},"before-class":"NoScroll","separator-class":"splitter bg-blue-grey-7"},{before:(0,r.w5)((()=>[(0,r.Wm)(s)])),separator:(0,r.w5)((()=>[])),after:(0,r.w5)((()=>[(0,r.Wm)(u,{ref:"textView"},null,512)])),_:1},8,["modelValue"])):(0,r.kq)("",!0),e.$q.screen.gt.sm?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",ft,["Image"==a.ViewMode||void 0==a.selectedItem.text?((0,r.wg)(),(0,r.j4)(s,{key:0})):(0,r.kq)("",!0),"Text"==a.ViewMode&&void 0!=a.selectedItem.text?((0,r.wg)(),(0,r.j4)(u,{key:1,ref:"textView"},null,512)):(0,r.kq)("",!0)]))])],64)}(0,r.Cn)(),(0,r.dD)("data-v-9fbb7dae");const pt={class:"MainBox"},ht={ref:"mainBox",class:"imagebox"},gt=["src"],vt={key:0,class:"ToolBarPos ToolbarBorder"},wt={class:"Toolbar text-light-blue"};function yt(e,t,n,o,a,i){const l=(0,r.up)("RotateText"),s=(0,r.up)("ToolBtn"),u=(0,r.up)("CommonBar"),c=(0,r.up)("q-spinner-box"),d=(0,r.up)("q-inner-loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",pt,[(0,r._)("div",ht,[(0,r._)("img",{ref:"img",id:"mainImage",ondragstart:"return false;",src:a.selectedItem.url},null,8,gt),a.selectedItem.text&&a.selectedItem.imgWidth?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"poplayer",showBorder:a.showBorder,showText:a.showText,recoItem:a.selectedItem},null,8,["showBorder","showText","recoItem"])):(0,r.kq)("",!0)],512)]),void 0!=a.selectedItem.text?((0,r.wg)(),(0,r.iD)("div",vt,[(0,r._)("div",wt,[e.$q.screen.gt.sm?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(s,{key:0,IconName:"o_article",label:e.$t("RViewImageText.text"),onClick:t[0]||(t[0]=e=>i.switchViewModel("Text"))},null,8,["label"])),(0,r.Wm)(s,{IconName:"o_text_format",label:"",disable:!a.showText,onClick:t[1]||(t[1]=e=>a.showText=!a.showText)},null,8,["disable"]),(0,r.Wm)(s,{IconName:"o_crop_16_9",label:"",disable:!a.showBorder,onClick:t[2]||(t[2]=e=>a.showBorder=!a.showBorder)},null,8,["disable"])]),(0,r.Wm)(u)])):(0,r.kq)("",!0),(0,r.Wm)(d,{showing:a.selectedItem.isScaning},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{size:"80px",color:"primary"})])),_:1},8,["showing"])],64)}(0,r.Cn)();let xt={lastId:0},bt=!1;function Tt(e){let t=e.getAttribute("ImgHandleDataID");if(void 0==t){let n={ele:e,srcSize:[e.offsetWidth,e.offsetHeight],translate:[0,0],scale:1,maxScaleVal:10,minScaleVal:128/Math.max(e.offsetWidth,e.offsetHeight),zoomOrigin:[0,0],lastTouchTime:0,applyTransform(){this.ele.style.transform="translate("+this.translate[0].toString()+"px, "+this.translate[1].toString()+"px)scale("+this.scale.toString()+")"},move(e,t){e+=this.translate[0],t+=this.translate[1];let n=this.ele.parentNode,r=n.offsetWidth,o=n.offsetHeight,a=this.ele.offsetWidth*this.scale,i=this.ele.offsetHeight*this.scale,l=Math.max(r/2,r-a),s=Math.min(r/2-a,0);e>l&&(e=l),e<s&&(e=s),l=Math.max(o/2,o-i),s=Math.min(o/2-i,0),t>l&&(t=l),t<s&&(t=s),this.translate[0]=e,this.translate[1]=t},setPos(e,t){this.translate[0]=e,this.translate[1]=t},zoom(e){let t=this.zoomOrigin[0]*this.scale,n=this.zoomOrigin[1]*this.scale;this.scale*=e,this.scale>this.maxScaleVal?this.scale=this.maxScaleVal:this.scale<this.minScaleVal&&(this.scale=this.minScaleVal);let r=this.zoomOrigin[0]*this.scale,o=this.zoomOrigin[1]*this.scale;this.move(t-r,n-o)},setZoomOrigin(e,t){this.zoomOrigin[0]=(e-this.translate[0])/this.scale,this.zoomOrigin[1]=(t-this.translate[1])/this.scale},fillToParent(){let e=this.ele.parentNode;const t=5,n=5;let r=e.offsetWidth,o=e.offsetHeight,a=this.ele.offsetWidth,i=this.ele.offsetHeight,l=Math.min((o-2*t)/i,(r-2*n)/a);l>1&&(l=1),this.scale=l,a*=l,i*=l;let s=(r-a)/2,u=(o-i)/2;this.setPos(s,u)}};t=xt.lastId.toString(),xt.lastId++,xt[t]=n,e.setAttribute("ImgHandleDataID",t)}return xt[t]}function Ct(e){e.preventDefault();let t=Tt(this);e||window.event;if(t.isMoved=!1,e.touches.length>=2)clearTimeout(t.OneTouchTimer),console.log("");else{let n=Date.now()-t.lastTouchTime;t.lastTouchTime=Date.now(),t.startPosition=[e.touches[0].pageX,e.touches[0].pageY],n>0&&n<=250?(console.log("zoom",e.touches[0]),t.setZoomOrigin(e.touches[0].pageX,e.touches[0].pageY-this.offsetTop),clearTimeout(t.OneTouchTimer),t.isDoubleTouch=!0):(t.OneTouchTimer=setTimeout((function(){console.log("",t,e),t.onTap&&t.onTap(e)}),350),t.isDoubleTouch=!1)}}function It(e){e.preventDefault();let t=Tt(this);if(t.isMoved=!0,clearTimeout(t.OneTouchTimer),e.touches.length>=2){var n=e.touches,r=getDistance(n[0],n[1])/getDistance(start[0],start[1]);gesturechange.scale=r.toFixed(2),gesturechange.rotation=rotation.toFixed(2),this.dispatchEvent(gesturechange)}else t.isDoubleTouch?$t(t,e):Vt(t,e)}function _t(e){e.preventDefault();let t=Tt(this);t.isMoved||t.isDoubleTouch&&Wt(t)}function Dt(e){if("SPAN"==e.target.tagName)return void(bt=!1);e.preventDefault();let t=Tt(this);t.fillToParent(),t.applyTransform()}function St(e){e.preventDefault();let t=Tt(this);t.setZoomOrigin(e.layerX,e.layerY);const n=e.deltaY>0?.8:1.2;t.zoom(n),t.applyTransform()}function Pt(e){if(1==e.button)return;if("SPAN"==e.target.tagName)return void(bt=!1);e.preventDefault(),bt=!0;let t=Tt(this);t.startPosition=[e.layerX,e.layerY]}function kt(e){if(1==e.button){let e=Tt(this);return e.fillToParent(),void e.applyTransform()}}function Wt(e){e.fillToParent(),e.applyTransform()}function $t(e,t){let n=1+(e.startPosition[1]-t.touches[0].pageY)/150;e.zoom(n),e.applyTransform(),e.startPosition=[t.touches[0].pageX,t.touches[0].pageY]}function Vt(e,t){let n=[t.touches[0].pageX,t.touches[0].pageY],r=[n[0]-e.startPosition[0],n[1]-e.startPosition[1]];e.startPosition=n,e.move(r[0],r[1]),e.applyTransform()}function Ft(e){if(!bt||1!=e.buttons)return;e.preventDefault();let t=Tt(this),n=[e.layerX,e.layerY],r=[n[0]-t.startPosition[0],n[1]-t.startPosition[1]];t.startPosition=n,t.move(r[0],r[1]),t.applyTransform()}function At(e){let t=e.getAttribute("ImgHandleDataID");t&&delete xt[t]}function Rt(e){let t=e.getAttribute("ImgHandleDataID");void 0==t?(e.addEventListener("touchstart",Ct,!1),e.addEventListener("touchmove",It,!1),e.addEventListener("touchend",_t,!1),e.addEventListener("mousewheel",St,!1),e.addEventListener("dblclick",Dt,!1),e.addEventListener("mousedown",Pt,!1),e.addEventListener("mouseup",kt,!1),e.addEventListener("mousemove",Ft,!1),e.style.transformOrigin="0 0"):At(e),e.removeAttribute("ImgHandleDataID");let n=Tt(e);return n.fillToParent(),n.applyTransform(),n}(0,r.dD)("data-v-329fadd4");const qt={class:"PosTextBoxDiv"},Et=["onBlur","onClick"],Bt={key:0,class:"tramsformOriLT"},Mt=["innerHTML"];function Ot(e,t,n,o,a,s){return(0,r.wg)(),(0,r.iD)("div",qt,[(0,r._)("div",{class:"PosTextBox",style:(0,i.j5)(a.dCSS),ref:"PosTextBox"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.recoItem.detail,(e=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{id:"rotateBox",class:(0,i.C_)(["rotateBox",{"bg-green-3":n.showText&&!this.textBgTransparent&&e.selected,"bg-deep-orange-2":n.showText&&!this.textBgTransparent&&!e.selected&&e.text!==e.srctext,"bg-blue-grey-3":n.showText&&!this.textBgTransparent&&!e.selected&&e.text===e.srctext,rotateBoxBorder:n.showBorder&&!e.selected,rotateBoxBorderSelected:n.showBorder&&e.selected}]),onBlur:t=>s.textChange(t,e),onClick:t=>s.textClick(t,e),key:e.rect,style:(0,i.j5)(e.textCss+s.getRotateBoxColorStyle())},[n.showText?((0,r.wg)(),(0,r.iD)("div",Bt,[(0,r._)("span",{class:(0,i.C_)({errorTextColor:e.score<a.recThres&&!e.textEdited,editedTextColor:e.textEdited}),innerHTML:s.getDisplayText(e)},null,10,Mt)])):(0,r.kq)("",!0)],46,Et)),[[l.F8,e.score>=a.recThres||a.keepLowScore]]))),128))],4)])}let Lt,zt;function Ht(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function Zt(e){for(let t=0;t<e.detail.length;t++){const n=e.detail[t];if(n.textCss)return;n.textCss="transform: matrix("+n.trMat[0].toString()+", "+n.trMat[1].toString()+", "+n.trMat[2].toString()+", "+n.trMat[3].toString()+", "+n.trMat[4].toString()+", "+n.trMat[5].toString()+");";const r=Ht(e.detail[t].rect[0],e.detail[t].rect[1]),o=Ht(e.detail[t].rect[1],e.detail[t].rect[2]),a=Math.min(r,o),i=Math.max(r,o);e.detail[t].textCss+="width: "+i.toString()+"px;height: "+a.toString()+"px;";const l=Ut(e.detail[t].text,a.toString()+"px");if(i>l+5){const n=e.detail[t].text.length,r=(i-l)/(n-1);e.detail[t].textCss+="letter-spacing: "+r.toString()+"px;",e.detail[t].textCss+="font-size: "+a.toString()+"px;"}else if(i<l){const n=i/l;e.detail[t].textCss+="font-size: "+(a*n).toString()+"px;"}else e.detail[t].textCss+="font-size: "+a.toString()+"px;"}}function Ut(e,t){const n=Ut.canvas||(Ut.canvas=document.createElement("canvas")),r=n.getContext("2d");r.font=t+" "+zt;const o=r.measureText(e);return o.width}(0,r.Cn)();const jt={data(){return{dCSS:"",ctWidth:0,ctHeight:0,errWordHandle:"Normal",recThres:.6,keepLowScore:!1,highlightErrWordThres:.6,textBackground:"#faebd7",textColor:"#000000",textBgTransparent:!1}},props:["recoItem","showBorder","showText"],emits:["onExitFullScreen"],methods:{textClick(e,t){e.stopPropagation(),p.set("SingleTextChoose",t)},getRotateBoxColorStyle(){let e="";return e+="color:"+this.textColor+";",e},textChange(e,t){e.target.innerText!==t.text?t.textEdited=e.target.innerText:t.textEdited="",this.$forceUpdate()},getDisplayText(e){if(e.text!==e.srctext)return e.text;if("Normal"===this.errWordHandle)return e.text;let t,n="",r=!1,o=-1;const a=this.errWordHandle.indexOf("Highlight")>=0?"<font color=red>":"",i=this.errWordHandle.indexOf("Highlight")>=0?"</font>":"";for(let l=0;l<e.wordScore.length;l++){const s=e.wordScore[l];s<Lt.highlightErrWordThres?(r||(n+=a),r=!0):(r&&(n+=i),o<0&&(o=n.length),t=n.length+1,r=!1),(s>=Lt.highlightErrWordThres||"Ignore"!==this.errWordHandle)&&(n+=e.text[l])}return r&&(n+=i),this.errWordHandle.indexOf("Ignore")>=0?o<0?"":n.slice(o,t):n},updata(e){if(!this.$refs.PosTextBox)return;const t=this.$refs.PosTextBox.parentNode;this.ctHeight=t.offsetHeight,this.ctWidth=t.offsetWidth;const n=e.imgWidth,r=e.imgHeight;this.dCSS="width: "+n.toString()+"px;height: "+r.toString()+"px;",Zt(e)}},created(){Lt=this,M.Z.addMonitor(["errWordHandle","highlightErrWordThres","recThres","keepLowScore","textBackground","textColor","textBgTransparent"],Lt),window.onresize=()=>(()=>{Lt.updata(Lt.recoItem)})()},mounted:function(){this.updata(this.recoItem),zt=window.getComputedStyle(this.$refs.PosTextBox).fontFamily},watch:{recoItem(e,t){this.updata(e)}}};jt.render=Ot,jt.__scopeId="data-v-329fadd4";const Qt=jt;(0,r.dD)("data-v-096a8b68");const Nt={class:"Toolbar text-light-blue"},Yt={key:1,class:"text-red-12 BtnBound iconlabel"};function Xt(e,t,n,o,a,l){const s=(0,r.up)("ToolBtn"),u=(0,r.up)("q-separator");return(0,r.wg)(),(0,r.iD)("div",Nt,[(0,r.Wm)(s,{IconName:"o_restart_alt",onClick:l.onRestartClick,label:e.$q.screen.gt.md?e.$t("bar.reRecognition"):""},null,8,["onClick","label"]),(0,r.Wm)(s,{IconName:"o_delete_outline",onClick:l.onDeleteClick,label:""},null,8,["onClick"]),a.selectedItem.detail.langCode!=a.recLangCode?((0,r.wg)(),(0,r.j4)(u,{key:0,vertical:"",inset:"",spaced:""})):(0,r.kq)("",!0),a.selectedItem.detail.langCode!=a.recLangCode?((0,r.wg)(),(0,r.iD)("div",Yt,[(0,r._)("span",null,(0,i.zw)(e.$t("langname."+a.selectedItem.detail.langCode)),1)])):(0,r.kq)("",!0)])}(0,r.Cn)();const Gt={components:{ToolBtn:te},data(){return{selectedItem:{url:"",text:void 0},showBorder:!1,showText:!0,recLangCode:""}},created(){M.Z.addMonitor(["selectedItem","recLangCode"],this)},methods:{onRestartClick(){z.reReco()},onDeleteClick(){z.deleteItem(z.selectedId)}}};var Jt=n(5869);Gt.render=Xt,Gt.__scopeId="data-v-096a8b68";const Kt=Gt;let en,tn;ee()(Gt,"components",{QSeparator:Jt.Z});const nn={components:{RotateText:Qt,ToolBtn:te,CommonBar:Kt},data(){return{selectedItem:{url:"",text:void 0},showBorder:!1,showText:!0}},created(){M.Z.addMonitor(["selectedItem"],this)},beforeUnmount(){window.onresize=null,At(tn.$refs.mainBox),p.rmevent("WindowResize",this.onWindowResize)},mounted(){tn=this,p.addevent("WindowResize",this.onWindowResize,!0)},watch:{selectedItem(e){this.onSelectedChangeCB(e.id)}},methods:{switchViewModel(e){p.set("ViewModel",e)},onWindowResize(){tn.$refs.mainBox&&tn.selectedItem.imgWidth&&(console.log("onWindowResize"),en.fillToParent(),en.applyTransform())},onTap(e){const t=tn.$refs.mainBox;let n=e.target;while(n!==t){if("rotateBox"===n.id){n._vei.onClick(e);break}n=n.parentNode}console.log("on tap ",e.target)},onSelectedChangeCB(e){tn.$nextTick((function(){tn.$refs.mainBox&&tn.selectedItem.imgWidth&&(tn.$refs.mainBox.style.width=tn.selectedItem.imgWidth+"px",tn.$refs.mainBox.style.height=tn.selectedItem.imgHeight+"px",en=Rt(tn.$refs.mainBox),en.onTap=tn.onTap)}))}}};var rn=n(5862);nn.render=yt,nn.__scopeId="data-v-9fbb7dae";const on=nn;ee()(nn,"components",{QInnerLoading:et.Z,QSpinnerBox:rn.Z}),(0,r.dD)("data-v-1b478c3b");const an={key:0,ref:"mainBox",class:"textbox"},ln={key:1,class:"ToolBarPos ToolbarBorder"},sn={class:"Toolbar text-light-blue"},un={class:"text-grey-13"};function cn(e,t,n,o,a,s){const u=(0,r.up)("ToolBtn"),c=(0,r.up)("CommonBar"),d=(0,r.up)("q-inner-loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[void 0!=a.selectedItem.text?((0,r.wg)(),(0,r.iD)("div",an,[(0,r.wy)((0,r._)("textarea",{class:"textItem","onUpdate:modelValue":t[0]||(t[0]=e=>a.textEdited=e)},null,512),[[l.nr,a.textEdited]])],512)):(0,r.kq)("",!0),void 0!=a.selectedItem.text?((0,r.wg)(),(0,r.iD)("div",ln,[(0,r._)("div",sn,[e.$q.screen.gt.sm?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(u,{key:0,IconName:"o_image",label:e.$t("RViewText.Image"),onClick:t[1]||(t[1]=e=>s.switchViewModel("Image"))},null,8,["label"])),(0,r.Wm)(u,{IconName:"o_content_copy",IconSize:"27px",label:e.$t("RViewText.Copy"),onClick:t[2]||(t[2]=()=>{s.copyText()})},null,8,["label"])]),e.$q.screen.gt.sm?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(c,{key:0}))])):(0,r.kq)("",!0),(0,r.Wm)(d,{showing:""===a.selectedItem.text},{default:(0,r.w5)((()=>[(0,r._)("h3",un,(0,i.zw)(e.$t("RViewText.noDetectText")),1)])),_:1},8,["showing"])],64)}(0,r.Cn)();var dn=n(7939);let fn;const mn={components:{ToolBtn:te,CommonBar:Kt},data(){return{textEdited:"",selectedItem:{}}},created(){fn=this,p.addevent("SeclectedRecoStateChanged",fn.onSeclectedRecoStateChanged),M.Z.addMonitor(["selectedItem"],this)},beforeUnmount(){p.rmevent("SeclectedRecoStateChanged",fn.onSeclectedRecoStateChanged)},mounted(){},watch:{selectedItem(e){this.onSeclectedRecoStateChanged()}},methods:{onSeclectedRecoStateChanged(){this.textEdited=this.selectedItem.text},switchViewModel(e){p.set("ViewModel",e)},copyText(){if(!fn.textEdited)return;const e=(0,dn.Z)(fn.textEdited);e?this.$q.notify({message:this.$t("message.copySuccess"),color:"blue",timeout:500}):this.$q.notify({message:this.$t("message.copyFailed"),color:"red",timeout:500})}}};mn.render=cn,mn.__scopeId="data-v-1b478c3b";const pn=mn;ee()(mn,"components",{QInnerLoading:et.Z});const hn={class:"Toolbar RecLangToolbar text-light-blue"};function gn(e,t,n,o,a,l){const s=(0,r.up)("ToolBtn"),u=(0,r.up)("q-item-section"),c=(0,r.up)("q-item"),d=(0,r.up)("q-list"),f=(0,r.up)("q-menu"),m=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)("div",hn,[(0,r._)("div",null,[(0,r.Wm)(s,{label:e.$t("identityLanguage:")+" "+e.$t("langname."+a.recLangCode),IconName:"o_subtitles"},null,8,["label"]),(0,r.Wm)(f,{modelValue:a.showLangMenu,"onUpdate:modelValue":t[0]||(t[0]=e=>a.showLangMenu=e)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.langList,(t=>((0,r.wg)(),(0,r.j4)(d,{dense:"",style:{"min-width":"100px"},key:t},{default:(0,r.w5)((()=>[t!=a.recLangCode?(0,r.wy)(((0,r.wg)(),(0,r.j4)(c,{key:0,onClick:e=>l.onRecLangChang(t),clickable:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("langname."+t)),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[m]]):(0,r.kq)("",!0)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])])}const vn={components:{ToolBtn:te},data(){return{showLangMenu:!1,langList:W.langList,recLangCode:"zh-CHS"}},created(){M.Z.addMonitor(["recLangCode"],this)},methods:{onRecLangChang(e){E.isBusy?this.$q.notify({message:this.$t("message.waitIdentityFinish"),color:"red",timeout:500}):E.setLang(e)}}};vn.render=gn;const wn=vn;ee()(vn,"components",{QMenu:rt.Z,QList:ot.Z,QItem:at.Z,QItemSection:it.Z}),ee()(vn,"directives",{ClosePopup:Be.Z});const yn={components:{RViewImageText:on,RViewText:pn,RecLangToolbar:wn},data(){return{splitterModel:60,ViewMode:"Text",selectedItem:{url:"",text:void 0}}},methods:{switchViewModel(e){this.ViewMode!==e&&(this.ViewMode=e)},onMainImageViewClick(){p.trig("MainImageViewClick")}},watch:{splitterModel(e){p.trig("WindowResize")}},created(){M.Z.addMonitor(["selectedItem"],this),p.addevent("ViewModel",this.switchViewModel)}};var xn=n(9723);yn.render=mt,yn.__scopeId="data-v-b17567d4";const bn=yn;ee()(yn,"components",{QSplitter:xn.Z}),(0,r.dD)("data-v-4397ee9c");const Tn={style:{height:"10rem"}},Cn={style:{height:"50%"},class:"bg-white imageDiv"},In={ref:"mainBox",class:"imagebox"},_n={ref:"img",ondragstart:"return false;",src:""},Dn={style:{height:"50%"},class:"bg-white"};function Sn(e,t,n,o,a,s){const u=(0,r.up)("q-btn"),c=(0,r.up)("q-space"),d=(0,r.up)("q-bar"),f=(0,r.up)("q-dialog");return(0,r.wg)(),(0,r.j4)(f,{modelValue:a.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>a.dialog=e),"content-class":"mainLayout","full-width":"",seamless:"",position:a.position},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Wm)(d,{class:"bg-blue-grey-3"},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,i.zw)(a.curIndex+1)+"/"+(0,i.zw)(a.itemLength),1),(0,r.Wm)(u,{disable:!(a.curIndex>0),dense:"",flat:"",icon:"o_chevron_left",label:"",onClick:t[0]||(t[0]=e=>s.jumpTo(-1))},null,8,["disable"]),(0,r.Wm)(u,{disable:!(a.curIndex+1<a.itemLength),icon:"o_chevron_right",dense:"",flat:"",label:"",onClick:t[1]||(t[1]=e=>s.jumpTo(1))},null,8,["disable"]),(0,r.Wm)(u,{disable:a.textItem.text==a.textVal,dense:"",flat:"",icon:"o_done",label:e.$t("SingleText.modify"),onClick:s.TextModified},null,8,["disable","label","onClick"]),(0,r.Wm)(u,{disable:a.textItem.text==a.textItem.srctext,dense:"",flat:"",icon:"o_undo",label:e.$t("SingleText.restore"),onClick:s.TextReset},null,8,["disable","label","onClick"]),(0,r.Wm)(c),(0,r.Wm)(u,{dense:"",flat:"",icon:"close",onClick:t[2]||(t[2]=e=>a.dialog=!1)})])),_:1}),(0,r._)("div",Tn,[(0,r._)("div",Cn,[(0,r._)("div",In,[(0,r._)("img",_n,null,512)],512)]),(0,r._)("div",Dn,[(0,r.wy)((0,r._)("textarea",{class:"textbox","onUpdate:modelValue":t[3]||(t[3]=e=>a.textVal=e)},null,512),[[l.nr,a.textVal]])])])])])),_:1},8,["modelValue","position"])}(0,r.Cn)();const Pn={data(){return{dialog:!1,position:"bottom",textVal:"",textItem:{},curIndex:0,itemLength:10,selectedItem:{}}},created(){p.addevent("SingleTextChoose",this.onSingleTextChoose),p.addevent("WindowResize",this.onWindowResize,!0),p.addevent("MainImageViewClick",this.onMainImageViewClick,!0)},beforeUnmount(){p.rmevent("SingleTextChoose",this.onSingleTextChoose),p.rmevent("WindowResize",this.onWindowResize),p.rmevent("MainImageViewClick",this.onMainImageViewClick)},mounted(){},methods:{onMainImageViewClick(){this.textItem.selected=!1,this.dialog=!1},onWindowResize(){this.$refs.mainBox&&Rt(this.$refs.mainBox)},open(e){this.position=e,this.dialog=!0},TextModified(){this.textItem.text=this.textVal,z.refreshItemText(this.selectedItem),p.trig("SeclectedRecoStateChanged")},TextReset(){this.textVal=this.textItem.srctext,this.TextModified()},jumpTo(e){p.set("SingleTextChoose",this.selectedItem.detail[this.curIndex+e])},onSingleTextChoose(e){this.selectedItem=z.getSelectedItem(),this.itemLength=this.selectedItem.detail.length,this.curIndex=this.selectedItem.detail.indexOf(e),this.textItem.selected=!1,this.textItem=e,this.textItem.selected=!0,this.dialog=!0,this.textVal=e.text,this.$nextTick((function(){const e=q(document.getElementById("mainImage"),this.textItem.rect);this.$refs.mainBox.style.width=e.width+"px",this.$refs.mainBox.style.height=e.height+"px",this.$refs.img.src=e.url,Rt(this.$refs.mainBox)}))}}};Pn.render=Sn,Pn.__scopeId="data-v-4397ee9c";const kn=Pn;function Wn(e,t,n,o,a,l){const s=(0,r.up)("q-circular-progress"),u=(0,r.up)("q-card"),c=(0,r.up)("q-dialog");return a.showDialog?((0,r.wg)(),(0,r.j4)(c,{key:0,modelValue:a.showDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>a.showDialog=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"mainCard",style:{width:"300px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{"show-value":"",value:a.progressVal,size:"150px",color:"light-blue",class:"q-ma-md"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(a.progressVal)+"%",1)])),_:1},8,["value"]),(0,r._)("h5",null,(0,i.zw)(e.$t("common.loading")+" "+e.$t("langname."+a.langname)),1)])),_:1})])),_:1},8,["modelValue"])):(0,r.kq)("",!0)}let $n;ee()(Pn,"components",{QDialog:Te.Z,QBar:_e.Z,QBtn:Se.Z,QSpace:De.Z});const Vn={data(){return{showDialog:!0,progressVal:0,langname:"zh-CHS"}},mounted(){$n=this,E.onprogress=function(e,t){$n.progressVal=Math.round(e/t*100)},E.onRuntimeInitialized=function(){E.setLang(M.Z.get("recLangCode"))},E.onSetLangFinish=function(){p.set("AntOcrInited",!0),M.Z.set("recLangCode",E.langCode),M.Z.save(),$n.showDialog=!1,$n.progressVal=0},E.onSetLangBegin=function(e){$n.showDialog=!0,$n.progressVal=0,$n.langname=e},E.init()}};Vn.render=Wn,Vn.__scopeId="data-v-36340d66";const Fn=Vn;ee()(Vn,"components",{QDialog:Te.Z,QCard:Re.Z,QCircularProgress:tt.Z});const An=(0,r.aZ)({name:"PageIndex",components:{ImageList:lt,UploadImage:dt,MainResultView:bn,SingleTextView:kn,RecLanguageLoader:Fn},methods:{onResize(){p.trig("WindowResize")}}});var Rn=n(5151);An.render=a;const qn=An;ee()(An,"components",{QPage:$e.Z,QResizeObserver:Rn.Z});const En=(0,r.aZ)({name:"PageIndex",components:{Index:qn},data(){return{}}});En.render=o;const Bn=En},7602:()=>{}}]);